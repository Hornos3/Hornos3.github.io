<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hornos3.github.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="CoLin&#39;s BLOG">
<meta property="og:url" content="http://hornos3.github.com/page/7/index.html">
<meta property="og:site_name" content="CoLin&#39;s BLOG">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="CoLin">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://hornos3.github.com/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>CoLin's BLOG</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">CoLin's BLOG</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC2%E7%AB%A0%E4%B9%A0%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC2%E7%AB%A0%E4%B9%A0%E9%A2%98/" class="post-title-link" itemprop="url">计算机组成原理——第2章习题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-03 00:02:03 / 修改时间：00:05:10" itemprop="dateCreated datePublished" datetime="2023-03-03T00:02:03+08:00">2023-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="21"><a class="markdownIt-Anchor" href="#21"></a> 2.1</h3>
<ul>
<li>真值：使用加号或减号表示数据符号的数据书写格式被称为真值。<font color=red>注意真值指的不是数据的值，而是数据的一种书写格式。一个数据必须要有一个书写格式才能展示出来。</font></li>
<li>机器码：在计算机中采用0或1表示数据的正负，由符号和数值一起编码表示的二进制数称为机器数或机器码。</li>
<li>原码：符号化的数值，正数符号位为0，负数为1，其余为与真值表示相同。</li>
<li>反码：又称1的补码，符号位与原码相同，真值为正数时，反码与原码相同；真值为负数时，反码数值与真值数值位相反。</li>
<li>补码：当真值为正数时，补码等于真值；当真值为负数时，真值加上模数即为补码，或者是反码加1。</li>
<li>移码：只用于定点整数的表示，通常用于表示浮点数阶码。编码方式是直接将真值x加上一个常数偏移量。移码可以直接比较大小。</li>
<li>模：模数，数值计量系统的计量范围。</li>
<li>定点数：约定计算机中所有数据的小数点位置固定。将小数点的位置固定在数据的最高数位之前的数据称为定点小数，将小数点固定在最低数位之后的数据称为定点整数。</li>
<li>浮点数：浮点数中的小数位不固定。</li>
<li>溢出：当数据超过计算机能够表示的数据范围时产生了溢出。</li>
<li>精度溢出：数轴上所有不在数值刻度上面的纯小数都超过了定点小数所能够表示的精度，无法表示，此时定点小数发生精度溢出。</li>
<li>浮点数规格化：使得浮点数的尾数真值最高有效位为1，即尾数的绝对值应该大于0.1<sub>2</sub>。</li>
<li>隐藏位：在规格化浮点数中由于尾数的最高有效位一定为1，因此这一位可以不用保存到数据中，这就是被隐藏的一位，即隐藏位。</li>
<li>码距：在编码系统中，两个编码一一对应的所有二进制位中不同的二进制位数，又称海明距离。</li>
<li>校验码：具有发现错误或纠正错误能力的数据编码，用于提升数据在时间和空间两个维度上的可靠性传输的机制。</li>
<li>多重奇偶校验：对数据中的某一位数据位都有多个奇偶校验码对其进行校验的校验方式。</li>
<li>海明码：一种既能检错又能纠错的校验码。</li>
<li>CRC码：循环冗余校验码。</li>
</ul>
<h3 id="22"><a class="markdownIt-Anchor" href="#22"></a> 2.2</h3>
<ol>
<li>B<br />
3个1和5个0能够表示的最小整数为10000011，值为131-256=-125。</li>
<li>A</li>
<li>B<br />
65530是无符号数，这里进行无符号扩展后真值依然为65530，因此为0000FFFAH</li>
<li>C</li>
<li>A<br />
IEEE754标注规定32位浮点数含1位符号位、8位阶码和23位尾数位。-8.25=-1000.01<sub>2</sub>=-1.00001×2<sup>11</sup>（二进制），因此符号位为1，阶码为3+127=130=10000010，尾数为00001000 00000000 0000000。因此存储的值为：11000001 00000100 00000000 00000000，即C1040000H。</li>
<li>A<br />
C6400000即为1100 0110 0100 0000 0000 0000 0000 0000，符号位1，阶码为10001100=140，阶数为13，尾数为0.1，加上1变成1.1<sub>2</sub>。因此值为-1.5×2<sup>13</sup>。</li>
<li>D<br />
按照IEEE754标准，float型能够表示最大整数时，阶码对应的阶数为254-127=127，尾数为1.111…，易知尾数+2<sup>-23</sup>=2，因此尾数的值为2-2<sup>23</sup>。最终的值为2<sup>127</sup>×(2-2<sup>23</sup>)=2<sup>128</sup>-2<sup>104</sup>。</li>
<li>A<br />
按照IEEE754标准，最小的规格化正数阶码对应的阶数为1-127=-126，尾数全0，最终的值为2<sup>-126</sup>。</li>
<li>A<br />
CC900000的符号为1，阶码为10011001=152。B0C00000的符号为1，阶码为01100001=97，二者均为负数，且前者绝对值更大，因此前者小于后者。</li>
<li>B<br />
将浮点数类型转换为int类型之后小数部分会丢失，但i本来就没有小数部分，因此A正确，B错误。C由于f的表示范围在float之内，因此转为double之后再转回到float没有影响，C正确。D错误，d比f大得多，会导致f+d时f丢失。</li>
<li>C</li>
</ol>
<h3 id="23"><a class="markdownIt-Anchor" href="#23"></a> 2.3</h3>
<ul>
<li>
<ol>
<li>因为二进制的数据使用硬件表示较为方便，其容易与简单的物理状态对应，算数逻辑运算电路更容易实现。</li>
</ol>
</li>
<li>
<ol start="2">
<li>首先最为明显的一点代价就是校验码的位数大大增加。单纯的奇偶校验只需要1位校验码，而交叉奇偶校验需要行数+列数个校验位。其次就是校验过程较普通的奇偶校验复杂，需要提取每一行每一列的数据进行校验。</li>
</ol>
</li>
<li>
<ol start="3">
<li>补码计算加减法较原码和反码更方便。</li>
</ol>
</li>
<li>
<ol start="4">
<li>表示范围由阶码位数决定，精度由尾数位数决定。</li>
</ol>
</li>
<li>
<ol start="8">
<li>浮点数的正负只需要看最高位符号位即可。</li>
</ol>
</li>
<li>
<ol start="9">
<li>浮点数有两个0指的是浮点数的尾数采用原码表示，因此存在正0和负0两种0。在比较上需要另外进行判断，增加了硬件和软件设计的复杂性。</li>
</ol>
</li>
<li>
<ol start="10">
<li>选择一个合适的信息多项式，需要满足多项式最高次数r（也是校验位数）与原始数据信息之和k小于2<sup>r</sup>-1，将原来的数据左移r位之后进行模2除法运算，将余数填入最终数据的最低r位作为校验位。在校验时依然进行模2除法，如果余数为0认为没有错误，否则发现错误。CRC可以纠正一位错误。</li>
</ol>
</li>
</ul>
<h3 id="24"><a class="markdownIt-Anchor" href="#24"></a> 2.4</h3>
<table>
<thead>
<tr>
<th style="text-align:center">真值</th>
<th style="text-align:center">原码</th>
<th style="text-align:center">反码</th>
<th style="text-align:center">补码</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0.000…</td>
<td style="text-align:center">0.000…</td>
<td style="text-align:center">0.000…</td>
</tr>
<tr>
<td style="text-align:center">-0</td>
<td style="text-align:center">1.000…</td>
<td style="text-align:center">1.111…</td>
<td style="text-align:center">0.000…</td>
</tr>
<tr>
<td style="text-align:center">0.10101</td>
<td style="text-align:center">0.10101</td>
<td style="text-align:center">0.10101</td>
<td style="text-align:center">0.10101</td>
</tr>
<tr>
<td style="text-align:center">-0.10101</td>
<td style="text-align:center">1.10101</td>
<td style="text-align:center">1.01010</td>
<td style="text-align:center">1.01011</td>
</tr>
<tr>
<td style="text-align:center">0.11111</td>
<td style="text-align:center">0.11111</td>
<td style="text-align:center">0.11111</td>
<td style="text-align:center">0.11111</td>
</tr>
<tr>
<td style="text-align:center">-0.11111</td>
<td style="text-align:center">1.11111</td>
<td style="text-align:center">1.00000</td>
<td style="text-align:center">1.00001</td>
</tr>
<tr>
<td style="text-align:center">-0.10000</td>
<td style="text-align:center">1.10000</td>
<td style="text-align:center">1.01111</td>
<td style="text-align:center">1.10000</td>
</tr>
<tr>
<td style="text-align:center">0.10000</td>
<td style="text-align:center">0.10000</td>
<td style="text-align:center">0.10000</td>
<td style="text-align:center">0.10000</td>
</tr>
</tbody>
</table>
<h3 id="25"><a class="markdownIt-Anchor" href="#25"></a> 2.5</h3>
<ul>
<li>0.10010的真值为0.10010</li>
<li>1.00000的真值为-1.00000（减2，反码无法表示这个数）</li>
<li>1.10010的真值为-0.01110</li>
<li>0.10001的真值为0.10001</li>
<li>1.11111的真值为-0.00001</li>
<li>1.00001的真值为-0.11111</li>
</ul>
<h3 id="26"><a class="markdownIt-Anchor" href="#26"></a> 2.6</h3>
<p>略</p>
<h3 id="27"><a class="markdownIt-Anchor" href="#27"></a> 2.7</h3>
<p>16位无符号数：0-65535<br />
16位原码定点小数：1位作为符号位，数据范围为-32767/32768-32767/32768<br />
16位补码定点小数：数据范围为-1-32767/32768<br />
16位补码定点整数：数据范围为-32768-32767</p>
<h3 id="28"><a class="markdownIt-Anchor" href="#28"></a> 2.8</h3>
<p>补码的模为2<sup>最高位的进位位权值</sup>=256</p>
<h3 id="29"><a class="markdownIt-Anchor" href="#29"></a> 2.9</h3>
<p>-6.625=-110.101，符号位1，阶码127+2=10000001<sub>2</sub>，尾数10101000…，结果：11000000 11010100 0…=C0D40000<sub>16</sub></p>
<p>3.1415927需要首先计算尾数。尾数省略最高的1后为10010010 00011111 1011010，后面一位为1，因此进位为1011011。</p>
<p>64000=11111010 00000000</p>
<h3 id="210"><a class="markdownIt-Anchor" href="#210"></a> 2.10</h3>
<p>单精度浮点数43940000H=0100 0011 1001 0100 0…，符号位0，阶码10000111=135，阶数8，位数0010100…，结果为1.00101×2<sup>8</sup>=100101000=296。</p>
<h3 id="211"><a class="markdownIt-Anchor" href="#211"></a> 2.11</h3>
<p>单精度浮点数能够表示的最大数为2<sup>128</sup>-2<sup>104</sup>，能够表示的最小数是上面数字的相反数。最小正数为非规格化浮点数，尾数为00…01，阶码为0，阶数为<font color=red>-126（不是-127！）</font>。表示的数为2<sup>-126</sup>×2<sup>-23</sup>=2<sup>-149</sup>。</p>
<h3 id="212"><a class="markdownIt-Anchor" href="#212"></a> 2.12</h3>
<ol>
<li>可能</li>
<li>不可能</li>
</ol>
<h3 id="213"><a class="markdownIt-Anchor" href="#213"></a> 2.13</h3>
<p>3位阶码，移码为4。（尾数中没有隐藏位的设定，尾数和阶码均为补码）<br />
最大正数为2<sup>3</sup>×(1-2<sup>6</sup>)<br />
最小正数为2<sup>-4</sup>×2<sup>-6</sup><br />
最大负数为-2<sup>-4</sup>×2<sup>-6</sup><br />
最小负数为2<sup>-3</sup></p>
<h3 id="214"><a class="markdownIt-Anchor" href="#214"></a> 2.14</h3>
<p>57=111001，57/128=0.0111001，阶码为-2=1110，尾数为01.11001，最高的0为符号位，结果为1110 0111001000，第二个数略。</p>
<h3 id="215"><a class="markdownIt-Anchor" href="#215"></a> 2.15</h3>
<p>01011011的奇校验码为0，偶校验码为1。将收到的信息中的所有位统计1的个数或进行异或运算，奇校验异或结果为1则没有错误，偶校验异或结果为0则没有错误。</p>
<h3 id="216"><a class="markdownIt-Anchor" href="#216"></a> 2.16</h3>
<p>略</p>
<h3 id="217"><a class="markdownIt-Anchor" href="#217"></a> 2.17</h3>
<p>01101110计算海明校验码：<br />
海明校验码前面几位的第1、2、4、8位为校验码位，其余为数据位。<br />
因此结果必然为：??0?110?1110。<br />
第1位校验码校验第3、5、7、9、11位数据位，值为1。<br />
第2位校验码校验第3、6、7、10、11位数据位，值为1。<br />
第3位校验码校验第5、6、7、12位数据位，值为0<br />
第4位校验码校验第9、10、11、12位数据位，值为1。<br />
结果为110011011110。</p>
<p>如果第8位数据位出错，那么第3和第4个指错字值为1出错，定位到海明码中的第12位，即第8位数据位出错，将对应位取反即可。</p>
<h3 id="218"><a class="markdownIt-Anchor" href="#218"></a> 2.18</h3>
<p>数据为1001，生成多项式1101。<br />
对数据左移3位为1001000，除以1101的余数为011，故校验值为011。<br />
若接收到的数据信息为1101，则使用1101011除以011余数不为0，错误。纠错方法：对余数补零继续除获得余数，直到余数为1未知，除的次数即为错误的比特位的位置（左起第几位）。</p>
<p>原理：总校验码的第i位出错时，相除得到的余数补零再除得到的余数等于总校验码的第i+1位出错时相除得到的余数值。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC1%E7%AB%A0%E4%B9%A0%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC1%E7%AB%A0%E4%B9%A0%E9%A2%98/" class="post-title-link" itemprop="url">计算机组成原理——第1章习题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-03 00:02:00 / 修改时间：00:05:10" itemprop="dateCreated datePublished" datetime="2023-03-03T00:02:00+08:00">2023-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="11-解释下列名词"><a class="markdownIt-Anchor" href="#11-解释下列名词"></a> 1.1 解释下列名词</h3>
<ul>
<li>摩尔定律：指在计算机发展时期中，当价格不变时，集成电路上可以容纳的晶体管数量大约在18~24个月翻一番，性能也将提升一倍。其表现在：
<ul>
<li>单个芯片集成度提高之后，其成本变化不大，因此总体成本明显下降。</li>
<li>高集成度的芯片中，电路之间的距离更近，其连线更短，工作速度可以更高。</li>
<li>增加了芯片内部的连线，从而减少了外部连线，可靠性得以提高。</li>
<li>计算机体积越来越小，减少了电能的消耗，适应性更好。</li>
</ul>
</li>
<li>汇编器：将汇编语言翻译成机器语言目标程序的汇编程序，称为汇编器。</li>
<li>编译器：将高级语言翻译为汇编语言的程序，称为编译器。</li>
<li>解释器：将源程序中的语句按照顺序逐条翻译为机器语言目标程序并执行，且不生成目标程序的程序称为解释器。</li>
<li>链接器：将汇编器产生的多个可重定向目标程序整合为一个可执行的二进制程序的链接程序，称为链接器。</li>
<li>时钟周期：计算机最基本、最小的时间单位，在一个时钟周期之内，CPU仅完成一个最基本的动作。</li>
<li>机器字长：CPU一次处理的数据位数，一般等于计算机内部寄存器、运算器、数据总线的位宽。</li>
<li>主存容量：主存能够存储的最大信息量，一般用M（存储单元数）×N（每一个存储单元存储的二进制位数）表示。</li>
<li>CPI：Clock Cycles Per Instruction，CPU执行一条指令所需要的平均时钟周期数量。</li>
<li>IPC：CPI的倒数，一个时钟周期平均执行的指令数量。</li>
<li>MIPS：Million Instructions Per Second，每秒执行的指令数量（以百万计数）</li>
<li>MFLOPS：Million Floating-Point Operations Per Second，每秒执行的浮点数运算数量（以百万计数）</li>
<li>CPU时间：指某段程序执行的总时间（按照秒计算），等于程序执行需要的时钟周期数量乘以时钟周期长。（注意与程序的运行时间不同，程序运行时不止有CPU在工作，还有IO设备等，因此程序的运行时间大于等于CPU时间）</li>
</ul>
<h3 id="12-选择题"><a class="markdownIt-Anchor" href="#12-选择题"></a> 1.2 选择题</h3>
<ol>
<li>D</li>
<li>C</li>
<li>C</li>
<li>A</li>
<li>D</li>
<li>D</li>
<li>C<br />
<font color=red>错误的计算方法：根据CPI和计算机主频可以计算出每种指令的执行速度：MIPS<sub>A</sub>=600，MIPS<sub>B</sub>=400，MIPS<sub>C</sub>=300，MIPS<sub>D</sub>=240，然后计算加权平均：MIPS=600×0.5+400×0.2+300×0.1+240×0.2=458</font><br />
<font color=00F000>正确的计算方法：首先应该对CPI求加权平均为3，然后计算MIPS=400</font><br />
错误原因：MIPS=f/CPI，第一种方法相当于先除再加权，与第二种方法先加权再除的结果不同。第一种方法相当于是将一秒钟分为0.5、0.2、0.1、0.2四份，每一份执行一种指令，但是很显然这样执行的结果是四种指令的比例必然是不正确的。</li>
<li>D<br />
注意：这里是CPU速度提高50%，CPU时间是原来的1/150%=2/3，即60秒。</li>
<li>D<br />
执行时间=指令数量×CPI×时钟周期，优化后的执行时间是原来时间的1.2×70%=84%，即16.8秒。</li>
<li>C<br />
二者的MIPS分别为750和1200，因此比值为750/1200=0.625。但是题目问的是时间的比值，因此取倒数为1.6。</li>
</ol>
<h3 id="13"><a class="markdownIt-Anchor" href="#13"></a> 1.3</h3>
<p>冯诺依曼计算机的基本思想是：存储程序和程序控制的思想，存储程序将解题的步骤编制为程序，然后将程序和运行程序所需要的数据以二进制的形式存放到存储器中，方便执行。程序控制指计算机中的控制器逐条取出存储器中的指令并按顺序执行，控制各个功能部件进行相应的操作，完成数据的加工处理。<br />
部件包含：运算器、控制器、存储器、输入设备和输出设备五大部件。</p>
<h3 id="14"><a class="markdownIt-Anchor" href="#14"></a> 1.4</h3>
<p>从功能上可以分为：逻辑门层次、微代码层次、指令集架构层次、操作系统层次、汇编语言层次、高级语言层次。</p>
<ul>
<li>逻辑门层次是最为底层的计算机系统，由逻辑门、触发器等逻辑电路构成。</li>
<li>微代码层为实际的机器层，该层的用户使用微代码编写程序，写的程序由硬件直接执行。</li>
<li>指令集架构层次可以通过机器语言编写程序实现对计算机硬件的控制，也称为传统机器层或ISA层，是计算机硬件和软件之间的界面和纽带。</li>
<li>操作系统层用于对计算机的硬件和软件资源进行统一管理和调度，提高计算机的使用效率并方便用户使用计算机。</li>
<li>汇编语言层为用户提供助记符表示的汇编语言编程，与机器结构直接相关。</li>
<li>高级语言层是面向用户的抽象层次，用户使用与机器无关的高级语言编程，编程过程中不需要知道机器的技术细节，大大降低了用户学习和使用计算机的难度。</li>
</ul>
<h3 id="15"><a class="markdownIt-Anchor" href="#15"></a> 1.5</h3>
<p>CPI<sub>1</sub>=2×0.4+3×0.2+4×0.15+5×0.25=3.25<br />
CPI<sub>2</sub>=2.65<br />
MIPS<sub>1</sub>=184.6<br />
MIPS<sub>2</sub>=301.9</p>
<h3 id="16"><a class="markdownIt-Anchor" href="#16"></a> 1.6</h3>
<ol>
<li>优化前程序的CPI为1.6，优化后为1.75</li>
<li>优化前程序的MIPS为312.5，优化后为285.7</li>
<li>这次优化效果欠佳，最好应该减少CPI大的指令。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC6%E7%AB%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC6%E7%AB%A0/" class="post-title-link" itemprop="url">计算机组成原理——第6章</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-03 00:01:45 / 修改时间：00:05:10" itemprop="dateCreated datePublished" datetime="2023-03-03T00:01:45+08:00">2023-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="第6章-中央处理器"><a class="markdownIt-Anchor" href="#第6章-中央处理器"></a> 第6章 中央处理器</h1>
<h2 id="61-概述"><a class="markdownIt-Anchor" href="#61-概述"></a> 6.1 概述</h2>
<p>CPU的基本组成：运算器、控制器<br />
CPU的主要功能：程序控制、操作控制、时序控制、异常控制、数据加工等</p>
<p>主要寄存器：</p>
<ul>
<li>PC：程序计数器，即EIP(x86/x86-64)/PC(ARM/MIPS)</li>
<li>IR：指令寄存器，保存当前正在执行的指令</li>
<li>AR：地址寄存器，用于保存CPU访问主存的单元地址</li>
<li>DR：数据寄存器，用于保存从主存读入或将写入主存的数据</li>
<li>AC：累加寄存器</li>
<li>PSW：程序状态字，保存由某些指令建立的条件标志</li>
</ul>
<h2 id="62-指令周期"><a class="markdownIt-Anchor" href="#62-指令周期"></a> 6.2 指令周期</h2>
<p>指令执行时，首先以PC为地址访问主存取指令，同时更新PC的值作为后续指令的地址。若为分支指令且满足分支条件，则重新修改PC值作为分支目标地址，否则经历<font color=red>取操作数、执行指令、存操作数</font>的基本过程。</p>
<ul>
<li>时钟周期=节拍脉冲=震荡周期，可以完成一次微操作</li>
<li>机器周期=CPU周期，从主存读出一条指令的最短时间，可以完成一次复杂操作</li>
<li>指令周期，从主存取一条指令并执行指令的时间，由若干机器周期构成，机器周期包含若干时钟周期。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/18348aec40574fe5867cf25c61a083f7.png" alt="" /></p>
<p>时间控制的方式：</p>
<ul>
<li>定长指令周期：早期三级时序系统，机器周期数固定，节拍数固定，按照机器周期同步，mips单周期。</li>
<li>变长指令周期：现代时序系统，机器周期数可变，节拍数可变，按照时钟周期同步，mips多周期。</li>
</ul>
<p>将一条指令从取出到执行完成所需要的时间称为指令周期，指令周期可分为：</p>
<ul>
<li>取指周期：以PC的内容为地址从主存中取出指令，并计算后续指令的地址。对于变长指令需要经过指令译码得到指令的实际字节长度之后才能计算并修改PC的值。</li>
<li>译码/取操作数周期：对指令寄存器中的指令字进行指令译码，识别指令类型。根据指令地址码生成操作数有效地址，然后访问相应寄存器或主存单元。若为间接寻址则还需要加入间址周期（访存周期）得到操作数的地址。该周期内不能并行读取操作数，因此可能会经历多次取操作数周期。</li>
<li>执行周期：向运算器等部件发送操作控制命令，对已经取出的操作数进行加工处理，并将处理状态送入PSW中。不同指令的执行周期不同。</li>
<li>写回周期：将运算结果写回到目的寄存器或存储器中，将运算结果写回存储器较慢。</li>
</ul>
<h2 id="63-数据通路及指令操作流程"><a class="markdownIt-Anchor" href="#63-数据通路及指令操作流程"></a> 6.3 数据通路及指令操作流程</h2>
<p>数据通路——执行部件之间传输信息的路径。</p>
<ul>
<li>通路的建立由控制信号控制，受到时钟驱动。</li>
<li>不同指令，同一指令在执行的不同阶段的数据通路不同。</li>
<li>数据通路可以分为共享通路和专用通路。</li>
</ul>
<h3 id="631-数据通路模型与定时"><a class="markdownIt-Anchor" href="#631-数据通路模型与定时"></a> 6.3.1 数据通路模型与定时</h3>
<p>时钟信号上升沿时刻到寄存器输出稳定时刻之间有一段时延，称为<font color=red>寄存器延迟（clk_to_q）</font>。数据处理单元处理寄存器内容有一定时延，将所有输出信号稳定的延迟，也即所需稳定时间最长的输出信号的稳定时间，称为<font color=red>关键路径延迟（max）</font>。将计算结果保存到寄存器之后还需要稳定一段时间才能够接受下一个上升沿，称为<font color=red>寄存器建立时间（setup）</font>。时钟上升沿到来之前的数据输入需要保持一定时间的稳定，称为<font color=red>寄存器保持时间（hold）</font>。故<font color=red>数据通路的最小时钟周期必须大于T<sub>clk_to_q</sub>+T<sub>max</sub>+T<sub>setup</sub></font>，其中T<sub>max</sub>占主导。</p>
<p><img src="https://img-blog.csdnimg.cn/de0f98f42136464585ebed5fce96d6d5.png" alt="" /></p>
<p>保持时间违例：两个寄存器在一个上升沿同时更新新值，其中一个寄存器经过寄存器延迟和最短路径延迟（T<sub>min</sub>）到达另一个寄存器输入端，为了不让该信号修改寄存器的值，应该满足<font color=red>寄存器保持时间T<sub>hold</sub>&lt;寄存器延迟T<sub>clk_to_q</sub>+组合逻辑最短路径延迟T<sub>min</sub></font>。</p>
<h3 id="632-单总线结构的数据通路"><a class="markdownIt-Anchor" href="#632-单总线结构的数据通路"></a> 6.3.2 单总线结构的数据通路</h3>
<p>数据通路的分类：</p>
<ul>
<li>共享通路（总线型）：主要部件都连接在公共总线上，各个部件之间通过总线进行数据传输。其结构简单，实现容易，但并发性较差，需要分时使用总线，效率较低。</li>
<li>专用通路：并发度高，性能好，但设计复杂，成本高。可以看做多总线结构。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/3f0cfe89124c43659c4411dc548d251a.png" alt="" /></p>
<p>CPU的运算器、控制器、寄存器堆等核心部件均由一条内部的公共总线连接起来，构成单总线结构的数据通路。这条内部公共总线称为CPU的内总线。将连接CPU、内存及输入输出设备等部件构成计算机系统的总线称为系统总线或外总线。</p>
<p>考虑执行指令add r0, r1，首先需要从寄存器堆中取出两个寄存器的值并输入到ALU的两个输入端，ALU的两个输入端连接有两个锁存器，可以分别保存两个寄存器的值，取出两个寄存器的值需要使用两个时钟周期，两次取值操作分别占用总线一个周期。之后ALU计算得到结果，通过总线输入到寄存器堆中，共需要3个周期和2个锁存器。</p>
<p>如果能够添加一条总线直接连接ALU的一个输入和寄存器堆，则只需要两个时钟周期即可执行上述指令。第一步将一个寄存器的值保存到ALU一端的锁存器，第二步第二条总线将第二个寄存器的值输入到ALU另一端，ALU进行计算并通过第一条总线输出到寄存器堆中。共需2个时钟周期和1个锁存器。</p>
<h4 id="指令执行示例"><a class="markdownIt-Anchor" href="#指令执行示例"></a> 指令执行示例</h4>
<p><strong>LOAD R0, 6#</strong><br />
功能：将主存地址为6的内容写入R0寄存器</p>
<ul>
<li>取指令数据通路：
<ul>
<li>T1：PC保存到AR和X中，准备访问AR处地址的指令内容</li>
<li>T2：X+1保存到Z中，程序计数器+1，准备将Z写到PC，Z即为下一条指令地址</li>
<li>T3：Z保存到PC，从主存取出指令内容保存到DR</li>
<li>T4：将DR保存到IR，至此取指完成，指令内容已经被保存到IR。</li>
</ul>
</li>
<li>译码周期：略</li>
<li>执行周期，完成指令要求的任务，即首先取内存地址为6的数据，再保存到寄存器R0
<ul>
<li>T1：将IR中的地址操作数部分（值为6）保存到AR，X保存PC的值</li>
<li>T2：主存读取</li>
<li>T3：主存将读取的数据保存到DR</li>
<li>T4：将DR的内容保存到寄存器R0</li>
</ul>
</li>
</ul>
<p><strong>MOVE R1, 10</strong></p>
<ul>
<li>执行周期：
<ul>
<li>T1：将指令中的地址操作数部分（值为10）保存到R1</li>
</ul>
</li>
</ul>
<p><strong>ADD R0, R1</strong></p>
<ul>
<li>执行周期
<ul>
<li>T1：将寄存器R0保存到X</li>
<li>T2：R1的值输出到总线，ALU接收X和总线的数据，计算结果并保存到Z</li>
<li>T3：将Z的值写入到R0</li>
</ul>
</li>
</ul>
<p><strong>STORE R0, (R2)</strong></p>
<ul>
<li>执行周期，将R0的值保存到地址为R2的内存空间
<ul>
<li>T1：将R2的值保存到AR</li>
<li>T2：将R0的值保存到DR</li>
<li>T3：将DR的值写入到内存地址为AR的空间</li>
</ul>
</li>
</ul>
<p><strong>JMP 1000</strong></p>
<ul>
<li>执行周期
<ul>
<li>T1：将IR中的地址操作数（1000）保存到PC</li>
</ul>
</li>
</ul>
<h2 id="65-硬布线控制器"><a class="markdownIt-Anchor" href="#65-硬布线控制器"></a> 6.5 硬布线控制器</h2>
<p>硬布线控制器可以看成产生固定时序控制信号的逻辑电路。<br />
输入信号：指令译码，时钟信号，反馈信号<br />
输出信号：功能部件控制信号序列<br />
设计目标：最少元件，最快速度<br />
理论基础：布尔代数<br />
组成器件：门电路、触发器</p>
<ul>
<li>定长指令周期：使用2个机器周期，8个时钟周期，由于一些指令并不需要所有8个时钟周期，因此速度较慢（会浪费时间），但设计简单</li>
<li>变长指令周期：时钟周期数量可变，速度快，但设计较复杂</li>
</ul>
<p>硬布线控制器模型：包含指令寄存器和指令译码器，时序发生器、硬布线控制器组合逻辑单元等几个部分，其中硬布线控制器组合逻辑单元用于产生指令执行所需要的所有控制信号序列，是控制器的核心。<br />
输入来自：</p>
<ul>
<li>指令译码器的输出</li>
<li>执行部件以及IO总线的反馈信号</li>
<li>时序发生器的状态周期电位信号和节拍电位信号</li>
</ul>
<p>输出信号：微操作控制信号序列，可以看做所有输入信号的逻辑函数，每个控制信号都是由不同的指令译码信号、状态周期信号、节拍定位信号、状态反馈信号构成的逻辑与操作的和。（积之和范式）</p>
<p>固定指令周期硬布线控制器设计过程</p>
<ul>
<li>设计三级时序产生器：所有指令固定机器周期数，节拍数</li>
<li>列出所有机器指令的指令周期流程图，明确每个节拍的控制信号</li>
<li>找出产生同一个微操作控制信号的条件</li>
<li>写出各个微操作控制信号的布尔表达式</li>
<li>化简各个表达式</li>
<li>利用组合逻辑电路实现</li>
</ul>
<p>可变周期硬布线控制器设计步骤</p>
<ul>
<li>列出所有机器指令的指令周期流程图，明确每一个节拍的控制信号</li>
<li>绘制指令执行状态转换图</li>
<li>根据状态转换图构建状态集真值表，实现有限状态机组合逻辑</li>
<li>实现控制器组合逻辑电路</li>
</ul>
<h2 id="66-微程序控制器"><a class="markdownIt-Anchor" href="#66-微程序控制器"></a> 6.6 微程序控制器</h2>
<h3 id="661-微程序控制器的基本概念"><a class="markdownIt-Anchor" href="#661-微程序控制器的基本概念"></a> 6.6.1 微程序控制器的基本概念</h3>
<p>硬布线为同步逻辑，设计复杂，速度快，贵，且难以修改。一条指令有多个时钟周期，一个时钟周期对应一个状态，一个状态对应一组并发信号。<br />
微程序为存储逻辑，设计简单，速度慢，偏移，容易修改。将并发信号实现保存为微指令，一条指令对应于多条微指令，状态等同于存储器地址。</p>
<p>微地址寄存器μAR为控制存储器提供微指令地址，初始化为0，控制存储器0号单元应该为取指令微程序的第一条微指令。</p>
<h3 id="662-微程序控制器组成原理"><a class="markdownIt-Anchor" href="#662-微程序控制器组成原理"></a> 6.6.2 微程序控制器组成原理</h3>
<p>利用软件方法设计硬件的技术，将完成指令所需的控制信号按照格式编写为微指令，并存放到<font color=red>控制存储器（控存ROM）</font>，一条机器指令对应于一段微程序，微程序中有多条微指令。<br />
将存储技术与程序设计相结合，可以回避复杂的同步时序逻辑设计。</p>
<p>单总线CPU的微指令构造：</p>
<ul>
<li>操作控制字段：用于存储操作控制信号，每一位对应一个控制信号，也称微命令，可以同时给出多个操作信号。</li>
<li>顺序控制字段：用于控制微程序的执行顺序，判别逻辑为0，下一条微指令地址从<font color=red>下址字段</font>获取，否则按照约定规则生成。一个微程序的最后一条微指令的判别字段非零，代表地址跳转。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/b777065d983a410c8cc1d0af5fcd6870.png" alt="" /></p>
<h3 id="663-微程序控制器设计"><a class="markdownIt-Anchor" href="#663-微程序控制器设计"></a> 6.6.3 微程序控制器设计</h3>
<p>微指令包含操作控制字段和顺序控制字段，一条微指令对应于一个时钟周期，微指令操作控制字段的信号在该时钟周期之内有效。指令需要多少时钟周期就包含多少微指令。操作控制字段的每一位都代表一个控制结构的开启与否。在一个时钟周期内，需要开启的控制字段在操作控制字段中的对应位会被设置为1。</p>
<p>上面的顺序控制字段中P<sub>1</sub>表示下址字段是否有效，在取指周期的最后一个时钟周期，下址字段就无效，因为下一条微命令的地址不确定。其他的微程序的最后一个微命令的下址字段基本都为0。</p>
<p>微指令设计原则：</p>
<ul>
<li>有利于缩短微指令字长度</li>
<li>有利于减少控存容量</li>
<li>有利于提高微程序执行速度</li>
<li>有利于对微程序进行修改</li>
<li>有利于提高微程序设计的灵活性</li>
</ul>
<p>微指令的直接表示法简单直观，便于输出控制，但微指令长度太长，控存容量大。优化方法：</p>
<ul>
<li>修改直接表示为编码表示，压缩互斥性的微指令，如4个互斥性的微指令可以不用4个二进制位表示，而是用2个二进制位替换。</li>
<li>去掉下址字段，采用μPC=μPC+1的方式生成微指令地址。
<ul>
<li>微指令地址的形成方法有两种，一种是通过下址字段，另一种就是计数器法。前者微指令长，但控存容量大，后者微指令短，但需要加法器。</li>
</ul>
</li>
<li>修改水平型微指令为垂直型微指令，牺牲了并行性。
<ul>
<li>水平型微指令：在一个微指令周期内能够同时给出多个微命令的微指令。并行操作能力强，效率高，灵活性强，字较长，微程序短，控存容量大，性能好。</li>
<li>垂直型微指令：采用完全编码方法，将全部微命令编码化。字长短，微程序长，控存容量小，性能差，与指令相似，易于掌握，已经基本被淘汰。</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC5%E7%AB%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC5%E7%AB%A0/" class="post-title-link" itemprop="url">计算机组成原理——第5章</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-03 00:01:40 / 修改时间：00:05:10" itemprop="dateCreated datePublished" datetime="2023-03-03T00:01:40+08:00">2023-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="51-指令系统概述"><a class="markdownIt-Anchor" href="#51-指令系统概述"></a> 5.1 指令系统概述</h2>
<p>指令是用户使用计算机与计算机本身运行的基本功能单位。指令是计算机能够直接识别、执行的操作命令，是冯诺依曼结构计算机程序控制原理实现的载体。</p>
<p>指令系统是一台计算机中所有机器指令的集合。</p>
<h2 id="52-指令格式"><a class="markdownIt-Anchor" href="#52-指令格式"></a> 5.2 指令格式</h2>
<h3 id="521-指令字长度"><a class="markdownIt-Anchor" href="#521-指令字长度"></a> 5.2.1 指令字长度</h3>
<ul>
<li><mark>指令字长</mark>：指令中包含的二进制位数</li>
<li>计算机根据指令字长是否固定可以分为<mark>定长和变长指令系统</mark>
<ul>
<li>定长指令系统的指令长度固定，结构简单，有利于CPU取指令、译码和指令顺序寻址，但平均指令长度较长，冗余状态较多，不容易扩展。</li>
<li>变长指令系统的指令长度可变，结构灵活，冗余状态较少，平均指令长度较短，但取指令和译码有很多不便。</li>
</ul>
</li>
</ul>
<h2 id="522-指令地址码"><a class="markdownIt-Anchor" href="#522-指令地址码"></a> 5.2.2 指令地址码</h2>
<p>根据指令中地址码字段的个数可将指令分为：</p>
<ul>
<li>三地址指令——A<sub>3</sub>←(A<sub>1</sub>)OP(A<sub>2</sub>)</li>
<li>双地址指令——A<sub>1</sub>←(A<sub>1</sub>)OP(A<sub>2</sub>)</li>
<li>单地址指令——A<sub>1</sub>←OP(A<sub>1</sub>)，AC←(AC)OP(A<sub>1</sub>)</li>
<li>零地址指令</li>
</ul>
<p>按照指令中操作数的物理位置分类可以分为：</p>
<ul>
<li>存储器-存储器型</li>
<li>寄存器-寄存器型</li>
<li>寄存器-存储器型</li>
</ul>
<p>根据指令的功能可以分为：</p>
<ul>
<li>传送指令</li>
<li>定点算数运算指令</li>
<li>位运算指令</li>
<li>控制转移指令</li>
</ul>
<p>指令格式：操作码字段+寻址方式+地址码字段<br />
操作码字段的位数与支持的最大指令数有关，对于定长操作码而言，最大指令数m与操作码字段长n满足n≥log<sub>2</sub>m。对于变长操作码，可以向不用的地址码字段进行扩展。寻址方式字段的位数与支持的寻址方式种类有关。地址码字段的作用及影响与位数和寻址方式有关。</p>
<h2 id="53-寻址方式"><a class="markdownIt-Anchor" href="#53-寻址方式"></a> 5.3 寻址方式</h2>
<p>指令的寻址方式只有顺序寻址和跳跃寻址两种。</p>
<h3 id="531-指令寻址方式"><a class="markdownIt-Anchor" href="#531-指令寻址方式"></a> 5.3.1 指令寻址方式</h3>
<h4 id="顺序寻址方式"><a class="markdownIt-Anchor" href="#顺序寻址方式"></a> 顺序寻址方式</h4>
<p>程序的指令序列在主存顺序存放，执行时从第一条指令开始逐条取出并执行，这种程序的顺序执行过程被称为顺序寻址方式。<br />
CPU通过设置<mark>程序计数器</mark>对指令顺序号进行计数。每一次执行一条指令PC加1并指出下一条指令的地址，直到程序结束。</p>
<h4 id="跳跃寻址方式"><a class="markdownIt-Anchor" href="#跳跃寻址方式"></a> 跳跃寻址方式</h4>
<p>程序出现分支或转移时会改变程序的执行顺序，此时下条指令的地址不一定通过PC+1获得。</p>
<h3 id="532-操作数寻址方式"><a class="markdownIt-Anchor" href="#532-操作数寻址方式"></a> 5.3.2 操作数寻址方式</h3>
<ul>
<li>立即数寻址：地址码字段就是操作数本身。如MOV RAX, 200H中的200H。取指操作将数据和指令一并读入CPU内部的寄存器，指令执行速度快，便于程序设计，但数据大小受到字段的位数限制。</li>
<li>寄存器寻址：操作数在CPU内部寄存器中。如MOV RAX, RBX。操作数在寄存器中，指令执行速度快，但能访问的数据大小一般与计算机字长有关，地址字段的位数与计算机通用寄存器数量相关。</li>
<li>直接寻址：操作数在主存储器中，地址码字段给出操作数在内存中的地址。如MOV RAX, [4000H]。提供了访问主存的操作，获得数据需要访问主存，因此指令的执行速度较慢，地址字段的位数决定了访存的空间大小。</li>
<li>间接寻址：地址码字段给出操作数主存地址的地址。即需要进行两次寻址，相当于二重指针。解决了直接寻址方式下字段的位数限制访存范围大小的问题，但需要访问主存两次，指令执行速度慢。</li>
<li>寄存器间接寻址：地址码字段给出寄存器编号。如MOV RAX, [RBX]，需要首先访问寄存器获取寄存器的值，然后根据该值到主存中访存。其解决了直接寻址方式下地址字段的位数限制访存范围大小的问题，且获得数据只需要访问一次主存。</li>
<li>相对寻址：将程序计数器PC中的内容加上指令中的形式地址，形成操作数的有效地址。如JMP指令。该寻址方式可节省指令中的地址位数，便于程序在内存中成块移动，注意PC的改变对计算有效地址的影响，有效地址值应该为当前指令的地址+偏移量+<mark>当前指令的长度</mark>。</li>
<li>基址寻址：指定基址寄存器，与本指令地址无关。如MOV RAX, [RBP+10H]。使用基址寄存器可以访问更大的主存空间，对某一程序而言，<mark>基址值设定后不变</mark>，故要访问不同数据需要修改偏移量的值。</li>
<li>变址寻址：指定一个变址寄存器，与本指令地址无关。因此首先需要根据寄存器编号找到寄存器，再将寄存器值与偏移相加获得有效地址，之后访存。如MOV RAX, [RSI+10H]。</li>
</ul>
<h2 id="55-指令格式设计"><a class="markdownIt-Anchor" href="#55-指令格式设计"></a> 5.5 指令格式设计</h2>
<ul>
<li>根据指令数量的要求及是否支持操作码扩展，确定操作码字段的位数</li>
<li>根据对操作数的要求确定地址码字段的个数</li>
<li>根据寻址方式的要求，为每个地址码字段确定寻址方式字段位数</li>
<li>确定采用定长指令还是变长指令</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC4%E7%AB%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC4%E7%AB%A0/" class="post-title-link" itemprop="url">计算机组成原理——第4章</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-03 00:01:37 / 修改时间：00:05:10" itemprop="dateCreated datePublished" datetime="2023-03-03T00:01:37+08:00">2023-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="41-存储器概述"><a class="markdownIt-Anchor" href="#41-存储器概述"></a> 4.1 存储器概述</h2>
<p>存储器可以分为：</p>
<ul>
<li>随机存储器RAM，按照地址随机读写数据存储单元，且存取访问时间与存储单元的位置无关。</li>
<li>顺序存储器SAM，存储单元中的内容只能按照顺序访问，且访问速度与存储单元的位置有关。</li>
<li>直接存储器DAM，不必经过顺序搜索就能够在存储器中直接存取信息的存储器，兼有随机存储器和顺序存储器的访问特性。</li>
<li>只读存储器ROM。</li>
</ul>
<h4 id="存储系统的层次结构"><a class="markdownIt-Anchor" href="#存储系统的层次结构"></a> 存储系统的层次结构</h4>
<p>现实世界中，一个存储器的存储速度、存储容量和成本往往是相互矛盾的，因此需要多种不同类型的存储器。典型的存储系统是一个金字塔结构，从上到下依次为<mark>寄存器、高速缓存、主存、磁带、磁盘等</mark>。越往上访问速度越快，单位容量的成本越高，越往下存储容量越大。</p>
<p>存储体系层次化结构的理论基础：时间局部性原理和空间局部性原理。</p>
<h4 id="主存中数据的存放"><a class="markdownIt-Anchor" href="#主存中数据的存放"></a> 主存中数据的存放</h4>
<ul>
<li>存储字长：主存的一个存储单元能够存储的二进制位数。</li>
<li>数据字长：计算机一次能处理的二进制数的位数。</li>
<li>数据的边界对齐：在数据对齐的情况下，访问主存的次数相对于不对齐会减少一些，虽然浪费了一些空间，但是能够提升速度。以32位系统为例，双字数据的地址应该以8为倍数对齐，字数据地址应该以4为倍数对齐，以此类推。</li>
<li>大小端存储：采用多字节方式访问主存时主存中的字节顺序。存储器的低字节单元中存放的是数据的高字节时，称为大端，反之称为小端。</li>
</ul>
<h2 id="42-半导体存储器"><a class="markdownIt-Anchor" href="#42-半导体存储器"></a> 4.2 半导体存储器</h2>
<h3 id="421-静态mos存储器"><a class="markdownIt-Anchor" href="#421-静态mos存储器"></a> 4.2.1 静态MOS存储器</h3>
<p>存储器以静态MOS存储元为基本单元构成的存储器称为静态MOS存储器（SRAM）。</p>
<p><img src="https://img-blog.csdnimg.cn/d81df6d4e65d4db7b38b6124e0362f81.png" alt="" /></p>
<h4 id="工作原理"><a class="markdownIt-Anchor" href="#工作原理"></a> 工作原理</h4>
<ul>
<li>要想获取该单元存储的数据是0还是1，需要看A点和B点的电位。当A点为高电平而B点为低电平时，存储1，反之存储0。当A点为高电位时，T<sub>2</sub>导通，T<sub>1</sub>断路。</li>
<li>T<sub>3</sub>和T<sub>4</sub>为补充电荷使用。无论A还是B为高电平，这两个三极管一定导通，当A为高电平时，B接地，因此从T<sub>4</sub>过来的电荷都漏掉了，B点的电压还是0V，而A点则可以维持高电平。反之同理。</li>
<li>读取：当X地址译码线与Y地址译码线均导通时，4个三极管均导通，A的电平输出到左边，B的电平输出到右边。</li>
<li>写入：两个地址线导通后左边与右边一个输入高电平，一个输入低电平。设原来单元中存储1，现需要将其写为0，则需要向左边输入0V，右边输入高电平，这样放走了左边A的电荷之后，右边的T<sub>2</sub>就断路，B不再接地，其电荷量增加，导通T<sub>1</sub>使A的电荷完全被导走，以此达到新的稳态。注意这其中的步骤顺序。</li>
</ul>
<p>单译码结构：一维的线性结构，索引一个存储单元只需要一个地址线。索引2<sup>n</sup>地址空间需要2<sup>n</sup>条地址线。<br />
双译码结构：二维的地址结构，索引一个单元需要两个地址线。索引2<sup>n</sup>地址空间需要2<sup>n/2+1</sup>条地址线。</p>
<h3 id="422-动态mos存储器"><a class="markdownIt-Anchor" href="#422-动态mos存储器"></a> 4.2.2 动态MOS存储器</h3>
<p>SRAM的不足之处有：晶体管数量较多，存储密度低，功耗大。<br />
<img src="https://img-blog.csdnimg.cn/f7aa512bdb234f61aeb467eec7ffda55.png" alt="" /><br />
<img src="https://img-blog.csdnimg.cn/5f21cadb698247aebf6be87ab01dccf8.png" alt="" /></p>
<h4 id="工作原理-2"><a class="markdownIt-Anchor" href="#工作原理-2"></a> 工作原理</h4>
<ul>
<li>处于保持状态时，预充、两条译码线均为低电平，若此时A为高电平，B为低电平，则B接地，A上有大量电荷，因此电容C<sub>2</sub>带电，可以让A的高电平状态维持一段时间，但电荷还是会有流失，因此保持状态如果时间过长，其中的数据就会丢失。</li>
<li>刷新状态：预充和一条译码线（X译码线）导通，进行充电。如果原来A上带有电荷，但由于泄露已经较为微弱。在导通X译码线和预充之后，A得到了直接的电荷补充，而B由于此时仍然接地，因此无法得到电荷。双地址结构的DRAM刷新是按行进行的。</li>
<li>读数据：首先导通预充信号充电，使得左右两个C<sub>D</sub>充满电。若此时A为高电平，充电完成后先导通X地址译码线，这样左边C<sub>D</sub>会为C<sub>2</sub>充电，<mark>自身电荷量增加</mark>，而右边的C<sub>D</sub>将电荷部分转移到C<sub>1</sub>中，<mark>自身电荷量减少</mark>。然后导通Y地址译码线，左边输出的电平略高于V<sub>CC</sub>/2，右边输出的电平略低于V<sub>CC</sub>/2。</li>
<li>写数据：首先导通Y地址译码线，并写入高电平和低电平，设向原来保存1的单元写入数据0，则右边输入高电平，左边输入低电平，因此右边C<sub>D</sub>带电荷。然后导通X地址译码线。先是C<sub>2</sub>上的电荷量大量减少，使得B不再接地，然后B接收到右边C<sub>D</sub>的电荷，让A接地。</li>
</ul>
<h4 id="dram的刷新"><a class="markdownIt-Anchor" href="#dram的刷新"></a> DRAM的刷新</h4>
<ul>
<li>最大刷新周期：信息存储到丢失之前的这段时间，两次刷新时间间隔不能超过最大刷新周期。</li>
<li>刷新周期：存储器实际上完成两次刷新的之间的时间间隔。</li>
<li>DRAM按行进行刷新，为减少刷新的周期，可以减少存储矩阵行数，增加列数。</li>
<li>读操作也有刷新功能，但只能刷新一个单元。</li>
</ul>
<p>刷新的不同方式：</p>
<ul>
<li>集中刷新：将所有行在连续的一段时间内全部刷新完成。设刷新周期为2ms，2ms内一共可以进行4000次读写与保持操作，DRAM共256行，则集中刷新法是在前3744个读写周期内进行读写，而在后256个读写周期进行每一行的刷新。优点：读写操作期间不受刷新操作的影响，速度较快。缺点：存在较长时间无法进行访问的情况，“死区”。</li>
<li>分散刷新：将存储周期（时间较短，1μs左右）分为两个部分，第一个部分用于读写，第二个部分用于刷新。优点：不存在死区。缺点：速度慢。</li>
<li>异步刷新：将所有行的刷新平均分配到刷新周期之内，如刷新周期为2ms，共有256行，则将刷新周期分为256等份，每一个等份的前面所有存储周期用于读写，最后的一个存储周期用于刷新。</li>
</ul>
<h2 id="43-主存的组织和cpu的连接"><a class="markdownIt-Anchor" href="#43-主存的组织和cpu的连接"></a> 4.3 主存的组织和CPU的连接</h2>
<h3 id="432-存储器的扩展"><a class="markdownIt-Anchor" href="#432-存储器的扩展"></a> 4.3.2 存储器的扩展</h3>
<ul>
<li>位扩展：又称为字长扩展或数据总线扩展，将所有存储芯片的地址线、读写控制线并联，将输出合并得到数据内容，可以理解为，如果一块芯片的一个单元只能保存一位信息，则第一块芯片只保存所有地址中的第一位信息，第二块芯片只保存所有地址的第二位信息，等等。</li>
<li>字扩展：又称容量扩展或地址总线扩展，其不会增加数据的位宽，每一次寻址只会访问一块芯片，其他芯片没有被访问，输出也只是接受一个芯片的输出。将扩展出来的数据位线（地址的高位）连接到译码器来确定访问哪一块存储芯片。</li>
<li>字位同时扩展：上面两种方式的结合。</li>
</ul>
<h2 id="45-高速缓冲存储器"><a class="markdownIt-Anchor" href="#45-高速缓冲存储器"></a> 4.5 高速缓冲存储器</h2>
<p>cache：在CPU与主存之间添加一块小容量的快速的SRAM，以提升访问主存的性能。依据的原理是空间局部性。</p>
<h3 id="453-cache的基本原理"><a class="markdownIt-Anchor" href="#453-cache的基本原理"></a> 4.5.3 cache的基本原理</h3>
<p>CPU通过字节地址访问快速的cache，首先需要确定需要访问的数据是否在cache中。</p>
<ul>
<li>数据命中：数据在cache中。</li>
<li>命中访问时间：当数据命中时数据的访问时间，包括查找时间和cache访问时间两部分。</li>
<li>数据缺失：需要访问的数据不在cache中。需要将缺失的数据从主存调入到cache中才能访问数据。</li>
<li>缺失补偿：数据缺失时的访问时间，包括数据查找时间、主存访问时间、cache访问时间。</li>
<li>命中率：所有访问中成功命中的次数占总访问次数的比例。</li>
<li>缺失率：1-命中率。</li>
<li>访问效率：cache的命中访问时间与cache/主存系统的平均访问时间的比值。</li>
</ul>
<h3 id="454-cache读-写流程与关键技术"><a class="markdownIt-Anchor" href="#454-cache读-写流程与关键技术"></a> 4.5.4 cache读、写流程与关键技术</h3>
<h4 id="读"><a class="markdownIt-Anchor" href="#读"></a> 读</h4>
<p>读入时查找cache中是否有需要读取的数据，有则读取，没有则调入这一块数据后再读取。</p>
<h4 id="写"><a class="markdownIt-Anchor" href="#写"></a> 写</h4>
<p>写比读复杂一些。<br />
首先查找目标地址处的数据是否保存在cache，如果有则写入数据到cache。这里有两种策略：<mark>写回策略和写穿策略</mark>，写回策略在将数据写入cache之后立即结束操作，会导致cache与主存中数据的不一致；写穿策略在cache中数据被修改后再将数据写入到主存中，速度较慢。<br />
如果目标地址处的数据不在cache，则也有两种选择：一种是将数据直接写入到主存，另一种是将这一块地址的内容载入到cache后写入到cache，至于之后是否需要写入主存使用的就是写回策略和写穿策略两种策略了。</p>
<h3 id="455-相联存储器"><a class="markdownIt-Anchor" href="#455-相联存储器"></a> 4.5.5 相联存储器</h3>
<p>相联存储器可用于判断对应地址的数据是否保存在该存储器中，基本数单元是键值对，键是主存地址，值是主存地址下的数据。由于相联存储器可以进行所有键值对的并行查找，因此只需查找一次就可以确定一个键值对。</p>
<p><img src="https://img-blog.csdnimg.cn/11f8cf36bbcf4f479515775306c6d33b.png" alt="" /></p>
<h3 id="456-地址映射"><a class="markdownIt-Anchor" href="#456-地址映射"></a> 4.5.6 地址映射</h3>
<p>地址映射即为将主存地址空间映射到cache的地址空间，将存放在主存的程序或数据载入到cache块的规则。</p>
<ul>
<li>全相联：各个主存块都可以映射到cache中的任意一个数据块。</li>
<li>直接相联：各个主存块只能映射到cache的固定某一块。</li>
<li>组相联：各个主存块只能映射到cache固定组中的任意块。</li>
</ul>
<h4 id="全相联映射"><a class="markdownIt-Anchor" href="#全相联映射"></a> 全相联映射</h4>
<p>主存中每一个数据块都可以放置到cache中的任意一个数据块中，是一对多的映射关系。新的数据块可以载入到cache中任意一个空闲位置，只有cache满时才会进行数据块置换。</p>
<p>在全相联映射中，主存地址被划分为两部分：块号和块内地址。如果一块的大小为1024字节，则块内地址共10位，高位为块号。在cache中会保存块号和主存中该块号下的数据内容。</p>
<p>优点：cache利用率高，块冲突率低。缺点：淘汰算法复杂。适用于小容量的cache。</p>
<h4 id="直接相联映射"><a class="markdownIt-Anchor" href="#直接相联映射"></a> 直接相联映射</h4>
<p>在直接相联映射中，主存地址分为三部分：区号、区内块号、块内地址。其中区内块号为x，cache行数为y，则该块在cache中应该保存在第x行的位置。区内块号表示的数值应该与cache中的行数相同。</p>
<p>优点：淘汰算法简单。缺点：利用率较低，块冲突率高。使用率大容量cache。</p>
<h4 id="组相联映射"><a class="markdownIt-Anchor" href="#组相联映射"></a> 组相联映射</h4>
<p>组相联映射将主存地址分为3部分：组号、组内块号、块内地址。cache中所有行分为若干组，设一组有m行，共n组，则主存地址组号为x时应该保存在cache中的第x mod n组，组内块号为y的地址处应该保存在cache中的保存该组号的组中的任意一行。</p>
<h3 id="457-替换算法"><a class="markdownIt-Anchor" href="#457-替换算法"></a> 4.5.7 替换算法</h3>
<ul>
<li>先进先出算法</li>
<li>最不经常使用算法：替换访问次数最少的cache</li>
<li>近期最少使用算法：为每一行维持一个计数器，命中时计数器清零，否则加1，将计数器最大的行换出。</li>
<li>随机替换算法</li>
</ul>
<h2 id="46-虚拟存储器"><a class="markdownIt-Anchor" href="#46-虚拟存储器"></a> 4.6 虚拟存储器</h2>
<p>虚拟存储器处于主存-辅存存储层次，为了解决主存容量不足的问题，为程序设计者提供比主存空间大的编程空间。<br />
虚拟存储器可以分为：页式、段式和段页式。<br />
三种地址空间：虚拟地址空间、主存的地址空间、辅存地址空间。</p>
<p>在虚拟存储系统中运行时，CPU以虚拟地址访问主存，使用存储管理部件<mark>MMU</mark>找到虚拟地址与物理地址的对应关系，并判断该虚拟地址对应的物理地址是否在主存中，如果在则将虚拟地址转化为物理地址，CPU直接访问主存单元；否则将包含这个字的一页或一段调入主存，并在MMU中填写相关的标记信息。</p>
<h3 id="463-页式虚拟存储器"><a class="markdownIt-Anchor" href="#463-页式虚拟存储器"></a> 4.6.3 页式虚拟存储器</h3>
<p>虚拟地址被划分为虚拟页号VPN和虚拟页偏移VPO两部分，同时物理地址按照相同的划分方式分为物理页号PPN（页框号）和物理页偏移PPO。</p>
<p>页面命中时CPU硬件执行的步骤：</p>
<ul>
<li>CPU将虚拟地址传送给MMU。</li>
<li>MMU用页表基址寄存器PTBR和虚页号生成页表项地址PTEA，通过这个页表项地址可以找到目标虚拟地址对应的物理地址值保存在什么位置。</li>
<li>cache或主存向MMU返回页表项PTE。</li>
<li>如果返回的PTE中有效位为1，则MMU利用返回的PTE构造物理地址PA，并利用构造出的物理地址PA访问cache或主存。</li>
<li>cache或主存返回数据给CPU。</li>
</ul>
<p>缺页处理流程：前3步与上面相同</p>
<ul>
<li>PTE中有效位为0，所访问的页不在主存中，MMU触发异常调用内核的缺页中断处理程序。</li>
<li>如果主存页满，需要根据算法确定换出哪一个页，如果换出的页的有效位为1，则需要将其换出到磁盘。</li>
<li>缺页中断处理程序从磁盘中调入新的页，更新存储器中的页表项PTE。</li>
<li>返回原来进行继续执行。</li>
</ul>
<p>如果存储系统中包含cache，则可以将部分页表的内容保存到cache中。</p>
<p>转换旁路缓冲区：<mark>TLB</mark>，用于缓冲经常访问的页表项PTE，实质是一个小容量的cache，大多采用全相联或组相联形式以提高访问速度，且采用随机替换算法。通常<mark>称TLB中保存的表为快表，主存中保存的表称为慢表</mark>。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC3%E7%AB%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC3%E7%AB%A0/" class="post-title-link" itemprop="url">计算机组成原理——第3章</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-03 00:01:34 / 修改时间：00:05:10" itemprop="dateCreated datePublished" datetime="2023-03-03T00:01:34+08:00">2023-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="31-计算机中的运算"><a class="markdownIt-Anchor" href="#31-计算机中的运算"></a> 3.1 计算机中的运算</h2>
<p>注意移位运算中逻辑移位和算术移位的区别，算术移位不会修改符号位。</p>
<h2 id="32-定点加减法运算"><a class="markdownIt-Anchor" href="#32-定点加减法运算"></a> 3.2 定点加减法运算</h2>
<h3 id="321-补码加减法运算"><a class="markdownIt-Anchor" href="#321-补码加减法运算"></a> 3.2.1 补码加减法运算</h3>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>+</mo><mo stretchy="false">[</mo><mi>y</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>=</mo><mo stretchy="false">[</mo><mi>x</mi><mo>+</mo><mi>y</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mspace></mspace><mspace width="1em"/><mo stretchy="false">(</mo><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mspace width="0.3333333333333333em"/><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[x]_补+[y]_补=[x+y]_补 \pmod M
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:1em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:0.3333333333333333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span></span></p>
<p>在以M为模时，两数的补码之和等于两数和的补码。</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">[</mo><mi>x</mi><mo>−</mo><mi>y</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>=</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>−</mo><mo stretchy="false">[</mo><mi>y</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>=</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>+</mo><mo stretchy="false">[</mo><mo>−</mo><mi>y</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mspace></mspace><mspace width="1em"/><mo stretchy="false">(</mo><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mspace width="0.3333333333333333em"/><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[x-y]_补=[x]_补-[y]_补=[x]_补+[-y]_补 \pmod M
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:1em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:0.3333333333333333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span></span></p>
<h3 id="322-溢出及检测"><a class="markdownIt-Anchor" href="#322-溢出及检测"></a> 3.2.2 溢出及检测</h3>
<p>对于补码加法运算（减法可以转化为加法），溢出的检测方式有：</p>
<ul>
<li>当正数与正数相加得到负数，或负数与负数相加得到正数时，有溢出。当两个运算数符号不同时，一定不会发生溢出。</li>
<li>根据运算过程中最高数据位的进位和符号位的进位来判断。当最高数据位的进位与符号位的进位不一致时发生溢出。考虑正数加正数的情况，如果结果为负数，说明最高数据位的进位为1，而符号位的进位为0，不一致。若为负数加负数得到正数，则符号位的进位为1，最高数据位的进位为0（否则得到的结果中符号位为1），不一致。</li>
<li>使用变形补码，即使用两个二进制数表示数据的符号。正数符号以00表示，负数为11。在运算过程中如果符号位出现了01或10则说明发生了溢出。</li>
<li>使用软件的方法判断</li>
<li>对于无符号数的溢出，只需要看两者相加后有没有溢出的进位即可。</li>
</ul>
<h3 id="323-加减法的逻辑实现"><a class="markdownIt-Anchor" href="#323-加减法的逻辑实现"></a> 3.2.3 加减法的逻辑实现</h3>
<h4 id="全加器"><a class="markdownIt-Anchor" href="#全加器"></a> 全加器</h4>
<p>一位全加器需要接收两个操作数以及上一位的进位，输出该位的结果与下一位的进位。在设计过程中，如果需要使用减法，则将1与第二个操作数异或，然后进行加法操作。</p>
<h4 id="多位串行加法器"><a class="markdownIt-Anchor" href="#多位串行加法器"></a> 多位串行加法器</h4>
<p>将多个全加器串行在一起，上一位的进位传送到下一位的全加器中，多位串行全加器只能一位一位进行加法。</p>
<p>注意如果需要同时实现加法与减法，则增加一个输入标识计算是加法还是减法，0为加法，1为减法。如果需要计算减法，就需要首先计算第二个操作数的相反数的补码。<font color=red>计算一个数相反数的补码的方法是：对这个数所有二进制位取反再加1。</font>因此减法标识位需要加到第一个全加器的进位中，然后让所有第二个操作数的位取反，即异或1。</p>
<p>溢出检测方法：如果按照第一种溢出方法进行检测，将最高位输出结果与两个最高位输入进行检测，看是否满足正正得负或者负负得正的情况。如果按照第二种溢出方法检测则更加简单，只需要对最高位全加器的进位输出与次高位全加器的进位输出异或即可。</p>
<p>缺点：串行进位，计算时间长。优化：并行计算，首先求出每一位进位的条件，然后用门电路连接输入与输出，这样能够实现仅依靠操作数输入而不需要前一位的进位就可以判断某一位是否会产生进位。</p>
<h2 id="33-定点乘法运算"><a class="markdownIt-Anchor" href="#33-定点乘法运算"></a> 3.3 定点乘法运算</h2>
<h3 id="331-原码一位乘法"><a class="markdownIt-Anchor" href="#331-原码一位乘法"></a> 3.3.1 原码一位乘法</h3>
<p>二进制乘法的手工计算与十进制的乘法类似，都使用竖式计算。<br />
缺点：</p>
<ul>
<li>需要多个输入的全加器
<ul>
<li>解决方式：基于全加器循环累加0或被乘数</li>
</ul>
</li>
<li>需要长度足够的结果寄存器
<ul>
<li>解决方式：从部分积和乘数寄存器中获取结果</li>
</ul>
</li>
<li>对应乘数的不同位，部分积的左移次数不同，且整个过程中总的移位次数较多。
<ul>
<li>解决方式：右移部分积</li>
</ul>
</li>
</ul>
<p>原码一位乘法流程：</p>
<p><img src="https://img-blog.csdnimg.cn/b090c86b886e4223a9f9d0e4868df23f.png" alt="" /></p>
<h3 id="332-补码一位乘法"><a class="markdownIt-Anchor" href="#332-补码一位乘法"></a> 3.3.2 补码一位乘法</h3>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">[</mo><mi>x</mi><mo>×</mo><mi>y</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>=</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>×</mo><mn>0.</mn><msub><mi>y</mi><mn>1</mn></msub><msub><mi>y</mi><mn>2</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>y</mi><mi>n</mi></msub><mo>−</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>×</mo><msub><mi>y</mi><mn>0</mn></msub><mspace linebreak="newline"></mspace><mo>=</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub><mo>×</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo><msup><mn>2</mn><mrow><mo>−</mo><mi>i</mi></mrow></msup></mrow><annotation encoding="application/x-tex">[x×y]_补=[x]_补\times 0.y_1y_2...y_n-[x]_补\times y_0\\
=[x]_补\times\sum_{i=0}^n(y_{i+1}-y_i)2^{-i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.124664em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.874664em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>由上面公式可推出运算规则：</p>
<ul>
<li>如果y<sub>n+1</sub>=y<sub>n</sub>，部分积加0，算数右移1位。</li>
<li>如果y<sub>n</sub>y<sub>n+1</sub>=01，部分积加[x]<sub>补</sub>，算数右移1位。</li>
<li>如果y<sub>n</sub>y<sub>n+1</sub>=10，部分积加[-x]<sub>补</sub>，算数右移1位。</li>
<li>重复进行n+1步，最后一步不右移。</li>
</ul>
<p><font color=red>注意补码乘数在运算开始时符号位为1位，且后面要补一个0。</font></p>
<h2 id="34-定点除法计算"><a class="markdownIt-Anchor" href="#34-定点除法计算"></a> 3.4 定点除法计算</h2>
<h3 id="341-原码一位除法"><a class="markdownIt-Anchor" href="#341-原码一位除法"></a> 3.4.1 原码一位除法</h3>
<h4 id="原码恢复余数除法"><a class="markdownIt-Anchor" href="#原码恢复余数除法"></a> 原码恢复余数除法</h4>
<p>每一次需要尝试，如果不够减还需要重新加回去。<br />
<img src="https://img-blog.csdnimg.cn/106b40cf74b9474cbf7a82e02a53d300.png" alt="" /></p>
<h4 id="原码不恢复余数除法"><a class="markdownIt-Anchor" href="#原码不恢复余数除法"></a> 原码不恢复余数除法</h4>
<p>当不够减时，下一次计算则是左移之后加，即加减交替。不够减或不够加商都上0，否则都上1。<br />
<img src="https://img-blog.csdnimg.cn/f40cee7d60844426a5445105abe02082.png" alt="" /></p>
<h2 id="35-浮点运算"><a class="markdownIt-Anchor" href="#35-浮点运算"></a> 3.5 浮点运算</h2>
<h3 id="351-浮点加减法计算"><a class="markdownIt-Anchor" href="#351-浮点加减法计算"></a> 3.5.1 浮点加减法计算</h3>
<h4 id="规格化浮点数"><a class="markdownIt-Anchor" href="#规格化浮点数"></a> 规格化浮点数</h4>
<p>将一个浮点数按照指定的格式进行转换，规格化浮点数的尾数形式为00.1…或11.0…。如果是00.0…或11.1…这个形式，则需要进行左移，将尾数向左移动，每一次移动阶码-1，直到尾数为规范形式。当尾数为01或10开头时需要右移，阶码+1。</p>
<h4 id="浮点数加减"><a class="markdownIt-Anchor" href="#浮点数加减"></a> 浮点数加减</h4>
<ul>
<li>对阶：求出两个数的阶码的差，然后右移阶码小的数的尾数并增加其阶码直到二者阶码相等。</li>
<li>尾数加减</li>
<li>结果规格化</li>
<li>右移舍入规则：
<ul>
<li>0舍1入：如果右移出去的是1，则在最低位加1</li>
<li>恒置1：只要1被移出就将最后一位置为1。</li>
</ul>
</li>
<li>溢出处理：当阶码的尾数为01开头说明为尾数上溢，为10开头说明为下溢。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC2%E7%AB%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC2%E7%AB%A0/" class="post-title-link" itemprop="url">计算机组成原理——第2章</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-03 00:01:30 / 修改时间：00:05:10" itemprop="dateCreated datePublished" datetime="2023-03-03T00:01:30+08:00">2023-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="22-数值数据的表示"><a class="markdownIt-Anchor" href="#22-数值数据的表示"></a> 2.2 数值数据的表示</h2>
<ul>
<li><font color=red>真值</font>：使用&quot;+“、”-&quot;表示正负号的数值表示方式。</li>
<li><font color=red>机器数</font>：符号数值化的数据表示方法，使用0、1表示符号。</li>
<li>三种常见机器数（整数）：
<ul>
<li><font color=red>原码</font>：最高位为符号位，其余位值为数值的绝对值，符号位正数为0，负数为1。原码表示方便，但计算复杂，且有+0和-0两种0的表示方式。</li>
<li><font color=red>反码</font>：最高位符号位规则与原码相同，当数值为负数时，其余位值相对于原码全部取反。表示相对于原码较复杂，但计算简单，但0的表示同样不唯一。</li>
<li><font color=red>补码</font>：表示负数时为反码+1。</li>
<li>规则：对于总位数为n的二进制数，三种码对于正数的表示方法相同，可表示正数范围均为0~2<sup>n-1</sup>-1。原码表示负数x，二进制数的值为2<sup>n-1</sup>-x，反码表示为2<sup>n</sup>+x-1，补码表示为2<sup>n</sup>+x。反码的加法计算方法：二进制数直接相加后再加1。</li>
</ul>
</li>
<li><font color=red>移码</font>：非符号位与补码相同，符号位与补码相反。编码方式是直接将真值加上一个常数偏移量，因此得名。</li>
<li>定点数表示：X<sub>0</sub>.X<sub>1</sub>X<sub>2</sub>…，其表示范围为-1~1-2<sup>-n</sup>（使用补码形式进行编码）</li>
<li>浮点数表示：一般格式为E<sub>S</sub>E<sub>1</sub>E<sub>2</sub>…E<sub>n</sub>M<sub>S</sub>M<sub>1</sub>M<sub>2</sub>…M<sub>k</sub>，其中E为阶码位，确定数据的范围，M为尾数，表示数的精度。其中阶码位和尾数位的最高位均表示符号。浮点数表示的不足之处是不同机器可能从相同的二进制数中提取出不同的浮点数。
<ul>
<li>IEEE754标准规定单精度浮点数阶码8位，有效尾数23位（<font color=red>不含尾数中的符号位，尾数中的符号位位于阶码前面，在最高位</font>）；双精度浮点数阶码11位，有效尾数52位。<font color=red>阶码采用移码的方式表示，常数为127。</font>其中有效尾数的整数位1被省略。对于单精度浮点数，若其偏指数（带有符号位的阶码的无符号值）为E，尾数为M，则真值可表示为2<sup>E-127</sup>×(-1)<sup>S</sup>×1.M。
<ul>
<li>当E=0、M=0时表示机器零，无论S等于0还是1。</li>
<li>当E=0、M≠0时，真值为非规格化的浮点数，2<sup>-126</sup>×(-1)<sup>S</sup>×0.M。即这个数太接近0，即使阶码为0也必须让尾数的整数位为0才能表示，这样会影响数的表示精度。</li>
<li>当1≤E≤254时，正常表示，是规格化的浮点数。</li>
<li>当E=255、M=0时表示无穷大。</li>
<li>当E=255、M≠0时表示NaN。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="24-数据信息的校验"><a class="markdownIt-Anchor" href="#24-数据信息的校验"></a> 2.4 数据信息的校验</h2>
<h3 id="241-码距与校验"><a class="markdownIt-Anchor" href="#241-码距与校验"></a> 2.4.1 码距与校验</h3>
<p><font color=red>码距</font>：信息编码中两个编码对应的二进制位不同的位的个数。如10101和10001的码距为1，只有1个二进制位不同。码距越大、抗干扰、纠错能力越强，数据冗余越大，编码效率越低。<br />
码距越大，纠错就越容易，当码距变大时，将一个合法编码转化为另一个合法编码需要修改多位，概率较低，且可以根据不合法编码与合法编码之间的码距，选择与不合法编码的码距最小的合法编码纠错。</p>
<ul>
<li>当码距d≥e+1时，可以检测出e个错误</li>
<li>当码距d≥2t+1时，可以纠正t个错误</li>
<li>当码距d≥e+t+1时（e≥t），可以在检测e个错误的同时纠正t个错误。</li>
</ul>
<h3 id="242-奇偶校验"><a class="markdownIt-Anchor" href="#242-奇偶校验"></a> 2.4.2 奇偶校验</h3>
<p>检测二进制代码中1的个数的奇偶性进行校验。<br />
<font color=red>奇校验要让数据位和校验位整个的1的个数为奇数，偶校验则让1的个数为偶数</font>。因此奇校验是1的个数为偶数时校验码为1，而偶校验时1的个数为奇数时校验码为1。</p>
<p>优点：检错简单，编码效率高。<br />
缺点：不能获取错误位置，只是一种检错码，无错结论不可靠（如果两位同时错误无法检测出来）</p>
<p>改进：<font color=red>交叉奇偶校验</font>，将原始数据信息构建为行列矩阵式结构，每一行和每一列都产生一个偶校验位，最后生成一个公共校验位。当有一位出错时，可以根据行校验位和列校验位的检查判断出是哪一位出错。但当两位数据同事出错时，不能确定到底是哪两位出错（有两种情况）。<font color=red>可纠正1位错误、检查部分偶数位错误、不能检测出错误发生在数据位中任意一个矩形4个顶点上的错误。</font></p>
<h3 id="243-crc校验"><a class="markdownIt-Anchor" href="#243-crc校验"></a> 2.4.3 CRC校验</h3>
<p>Cyclic Redundancy Check，循环冗余校验，是一种基于模2运算建立编码规则的校验码。其中模2运算与异或运算的规则相同，在加的基础上不用进位。在此基础上可以获取模2乘法运算和除法运算的规则。</p>
<p>编码规则：设CRC码长度n位，原始数据C<sub>k-1</sub>C<sub>k-2</sub>…C<sub>0</sub>共k位，校验位P<sub>r-1</sub>P<sub>r-2</sub>…P<sub>0</sub>共r位，则<font color=red>n=k+r≤2<sup>r</sup>-1</font>。生成一个多项式G(x)，将待发送的二进制数据用该多项式表示：G(x)=C<sub>k-1</sub>x<sup>k-1</sup>+C<sub>k-2</sub>x<sup>k-2</sup>+…+C<sub>1</sub>x+C<sub>0</sub>。G(x)需要满足：</p>
<ul>
<li>最高位和最低位必须为1。</li>
<li>被传送信息任意一位出错时，被生成多项式除之后余数均不为0。</li>
<li>不同位发生错误时，模2除运算后余数不同。</li>
<li>对不为0的余数进行模2除运算能够使余数循环。</li>
</ul>
<p>编码方法：</p>
<ul>
<li>根据待校验信息的长度k按照k+r≤2<sup>r</sup>-1确定校验码位数。</li>
<li>根据r和生成多项式的选择原则，选择一个位数为r+1的生成多项式。</li>
<li>将有效信息左移r位得到r+k位的二进制数Q。</li>
<li>对Q除生成多项式，以余数替换Q的低r位。</li>
</ul>
<p>校验方法：<br />
用数据除生成多项式，余数为0即为正确。</p>
<p><font color=red>CRC校验码的循环特性</font>：第i位出错的数据除以生成多项式获得的余数R<sub>i</sub>与第i+1位出错的数据除以生成多项式获得的余数R<sub>i+1</sub>满足：<font color=red>R<sub>i+1</sub>=R<sub>i</sub>左移1位后除以生成多项式获得的余数。</font></p>
<p>纠错方法：<br />
记录当数据最高位错误时除以生成多项式获取的余数R。<br />
当待检测数据除以生成多项式获得的余数不是0也不是R时，一边对余数补零继续除，另一边对待检测数据循环左移，当余数的值为R时，将当前循环移位后的待检测数据的最高位取反，再移位回来即可完成纠错。</p>
<h3 id="243-海明校验"><a class="markdownIt-Anchor" href="#243-海明校验"></a> 2.4.3 海明校验</h3>
<p>一种既能检错又能纠错的校验码，本质是多重奇偶校验。（海明码为偶校验）</p>
<p>设海明校验码共n位，原始数据k位，校验位r位，满足k+r≤2<sup>r</sup>-1。<br />
r位校验码（P<sub>i</sub>，i=1,2,…,r）分别位于海明编码的第2<sup>i-1</sup>位。海明码第i位的数据由若干个位于小于i的校验位校验。<font color=red>注意：第i位如果为数据位，那么参与检验该位的海明码的计算方式是——获取i的二进制表示，二进制中若第j位为1，则第j个海明码参与检验该值。如海明校验码的第11位，二进制表示为1011，则第1、2、4个校验码位参与校验该值。</font>当有1位出错时，只需要将指错字的所有位转换为一个数值，该数值即为出错的位的索引。如第11位出错，则4个指错字中第1、2、4位必然为1，4个指错字结合为1011，即为出现错误的那一位。这种纠错方式可以纠正海明校验码中任何一位的错误，包括校验位。但海明校验不一定能够分辨出一位错与两位错。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC1%E7%AB%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%AC%AC1%E7%AB%A0/" class="post-title-link" itemprop="url">计算机组成原理——第1章</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-03 00:01:21 / 修改时间：00:05:10" itemprop="dateCreated datePublished" datetime="2023-03-03T00:01:21+08:00">2023-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="12-计算机系统的组成"><a class="markdownIt-Anchor" href="#12-计算机系统的组成"></a> 1.2 计算机系统的组成</h2>
<p>计算机系统由硬件系统和软件系统组成。</p>
<p><font color=red>冯诺依曼计算机的工作原理</font>：<br />
冯诺依曼计算机由两部分：存储程序和程序控制构成。</p>
<ul>
<li>存储程序将程序存放在计算机的存储器中。</li>
<li>程序控制按指令地址访问存储器并取出指令，经译码依次产生指令执行所需的控制信号，实现对计算的控制，完成指令的功能。</li>
</ul>
<h2 id="13-计算机系统的层次结构"><a class="markdownIt-Anchor" href="#13-计算机系统的层次结构"></a> 1.3 计算机系统的层次结构</h2>
<p>可将计算机的层次结构分为6个基本层次：</p>
<ul>
<li>高级语言层</li>
<li>汇编语言层</li>
<li>操作系统层</li>
<li>指令集架构层</li>
<li>微代码层</li>
<li>逻辑门层</li>
</ul>
<p>其中上三层属于软件层，下三层属于硬件层。高层是低层功能的扩展，低层是高层的基础。</p>
<ul>
<li>不同的用户位于不同的层次</li>
<li>不同层次具有不同属性</li>
<li>不同层次使用不同工具</li>
<li>不同层次代码效率不同</li>
</ul>
<p>透明性概念：用户在高层中所看到的计算机并不会展现出计算机低层的特性，但并不代表这些特性不存在。</p>
<h2 id="14-计算机性能指标与评价"><a class="markdownIt-Anchor" href="#14-计算机性能指标与评价"></a> 1.4 计算机性能指标与评价</h2>
<h3 id="141-基本性能指标"><a class="markdownIt-Anchor" href="#141-基本性能指标"></a> 1.4.1 基本性能指标</h3>
<p><font color=red>字长</font>：CPU一次处理的数据位数，用二进制数的长度来衡量。字长一般与计算机内部寄存器、运算器、数据总线的位宽相等。</p>
<p>字长影响计算精确度，字长越长精确度越高。另外还影响数据的表示范围和精度。字长越长，定点数的表示范围就越大，浮点数的表示范围越大，精度越高。</p>
<p><font color=red>总线宽度</font>：数据总线一次并行传输的最大信息位数。</p>
<p><font color=red>主存容量</font>：主存中能够存储的最大信息量，一般以M×N表示，M表示存储单元数（字容量），N表示每个存储单元存储的二进制位数（位容量）。</p>
<p><font color=red>存储带宽</font>：单位时间内与主存交换的二进制数据量，单位B/s。（影响存储带宽的指标包括数据位宽和数据传输速率）</p>
<h3 id="142-与时间有关的性能指标"><a class="markdownIt-Anchor" href="#142-与时间有关的性能指标"></a> 1.4.2 与时间有关的性能指标</h3>
<p><font color=red>时钟周期</font>：计算机中最基本的最小的时间单位，一个时钟周期内CPU仅完成一个基本的动作。是时钟频率的倒数，常记为T。CPU内核工作的时钟频率称为<font color=red>主频</font>，常记作f。<font color=red>外频</font>：指CPU(内存)与主板之间同步的时钟频率(系统总线的工作频率)；<font color=red>倍频</font>：CPU主频与外频之间的倍数；<font color=red>主频=外频×倍频</font>。</p>
<p><font color=red>CPI</font>：Clock Cycles Per Instruction，执行每一条指令所需要的平均时钟周期数。<br />
<font color=red>CPI = 程序中所有指令的时钟周期数之和 / 程序指令总数 = Σ(程序中各类指令的CPI × 程序中该类指令的比例)</font></p>
<p><font color=red>CPU时间</font>：即执行一个程序所需的物理时间，等于执行程序所需的时间周期数量 × 时间周期 = CPI × 程序中的指令数量 × 时间周期。</p>
<p><font color=red>IPC</font>：CPI的倒数，每个时钟周期能够执行的指令条数。</p>
<p><font color=red>MIPS</font>：Million Instructions Per Second，每秒多少百万条指令。计算公式：$$MIPS=\frac{IC}{T_{cpu}\times10<sup>6}$$其中IC表示程序中指令数量。$T_{cpu}$表示程序的CPU时间。如果上面的公式去掉10</sup>6^，则表示的是每秒可以执行多少条指令。公式变形：$$MIPS=\frac{f}{CPI}=IPC\times f$$这里时钟频率f的单位为MHz。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E7%AC%AC6%E7%AB%A0%E4%B9%A0%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E7%AC%AC6%E7%AB%A0%E4%B9%A0%E9%A2%98/" class="post-title-link" itemprop="url">计算机网络——第6章习题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-02 23:52:41 / 修改时间：23:53:17" itemprop="dateCreated datePublished" datetime="2023-03-02T23:52:41+08:00">2023-03-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="课后习题和问题"><a class="markdownIt-Anchor" href="#课后习题和问题"></a> 课后习题和问题</h2>
<h3 id="61~62"><a class="markdownIt-Anchor" href="#61~62"></a> 6.1~6.2</h3>
<ol>
<li>具体的交通工具</li>
<li>如果链路层能够实现TCP协议能够实现的所有可靠性，那么TCP可靠传输服务才是多余的。这些可靠性包括内容可靠、拥塞控制、流量控制等。</li>
<li>链路层能够提供的可能服务包括：</li>
</ol>
<ul>
<li>成帧，在每一个网络层数据报经链路传送之前，几乎所有的链路层协议都要将其使用链路层帧封装起来。</li>
<li>链路接入，媒体访问控制（MAC）协议规定了帧在链路上传输的规则。</li>
<li>可靠交付，当链路层协议提供可靠交付服务时，能够保证无差错地经过链路层移动每一个网络层数据报。</li>
<li>差错检测和纠正，通过让发送节点在帧中包括差错检测比特，让接收节点进行差错检查。</li>
</ul>
<h3 id="63"><a class="markdownIt-Anchor" href="#63"></a> 6.3</h3>
<ol start="4">
<li>d(prop)&lt;L/R，意味着传播时延小于传输时延。当传播距离很大时，一方将自己的分组发送完毕之后才会收到对方发送过来的分组，此时不会出现碰撞。当传播距离较小时，一方的分组还未完全发送完毕就已经检测到了对方分组的数据，此时就发生了碰撞。</li>
<li>广播信道4种希望的特性：</li>
</ol>
<ul>
<li>仅有一个节点发送时，该结点能够独占所有的带宽。</li>
<li>多个节点发送时，能够平均分配带宽且充分利用带宽。</li>
<li>协议是分散的，任何一个节点的故障不会影响到整个系统的运作。</li>
<li>协议是简单的，实现成本低。<br />
时隙ALOHA能够实现第1、3、4种特性，但无法满足第2种。当有多个节点发送时，会产生碰撞。<br />
令牌传递能够实现第1、2种特性，无法满足第3、4种。当一个节点产生故障时，传递令牌的链路就会断裂，整个系统将会失效。另外每一种令牌传输协议都需要解决一些棘手的问题（P301原话）</li>
</ul>
<ol start="6">
<li>第5次碰撞后，节点应该在0~31中选择一个数字延时，因此选择4的概率为1/32。选择4时，网卡将会等待4×512bit时间，在10Mbps以太网中的时延为2048/10<sup>7</sup>=2.048×10<sup>-4</sup>s。</li>
<li>略</li>
<li>当局域网周长很大时，令牌传递一个周期可能需要很长时间，当整个局域网中只有一台主机需要广播时，其不能一直广播，必须等待若干个周期的时间才能完成其广播，降低了效率。</li>
</ol>
<h3 id="64"><a class="markdownIt-Anchor" href="#64"></a> 6.4</h3>
<ol start="9">
<li>MAC地址是48bit值，空间大小为2<sup>48</sup>。IPv4为2<sup>30</sup>，IPv6为2<sup>128</sup>。</li>
<li>不会处理这些帧（丢弃）。也不会将这些帧传递给C的网络层。如果A使用广播，则会处理，也会传递给网络层。</li>
<li>因为ARP的功能是查询给定IP地址主机的MAC地址，此时发起请求的主机还不知道该IP地址对应的MAC地址是什么，因此只能通过广播的方式让ARP请求在整个网络中传播，期望目标IP地址主机能够给出回应。ARP响应报文已经知道了源、目的主机的IP地址以及MAC地址，因此不需要另外使用广播帧增加链路的负担，而是使用普通的链路层帧直接发送即可。</li>
<li>不可能，两张ARP表对应的是两个子网中主机的MAC地址。</li>
<li>没有什么不同，新的以太网和已经安装的以太网设备基础保持完全兼容。</li>
<li>5个</li>
<li>这取决于交换机一共有多少个端口。802.1Q标准中在标准以太网帧中加入了4字节的VLAN标签，理论上这个标签的空间为2<sup>32</sup>，但一台交换机不可能有这么多端口，因此取决于这个交换机的端口数量。</li>
<li>略</li>
</ol>
<h2 id="习题"><a class="markdownIt-Anchor" href="#习题"></a> 习题</h2>
<ol>
<li>偶校验方法，对于16个比特的检验，4×4校验使用的检验位最少。<br />
1110 1<br />
0110 0<br />
1001 0<br />
1101 1<br />
1100 0</li>
<li>对于单比特差错，二维奇偶校验的行校验码和列校验码必然各有一位出错，根据出错的行和列可以定位错误位，取反即可纠正。如将上一题修改为：<br />
1110 1<br />
0110 0<br />
10<mark>1</mark>1 0<br />
1101 1<br />
1100 0<br />
此时容易发现第3行的行校验码错误，第3行的列校验码错误。<br />
某些双比特差错能够监测但不能纠正。如：<br />
1110 1<br />
0<mark>1</mark>10 0<br />
1001 0<br />
11<mark>0</mark>1 1<br />
1100 0<br />
这里的第2、4行的校验码出错，第2、3列的校验码出错。但是，有两种错误都可能会导致这种校验错误：第2行第2列和第4行第3列的2位出错，第2行第4列和第4行第3列2位出错。</li>
<li>这个字符串对应的比特数据为：<br />
0100 1110 0110 0101<br />
0111 0100 0111 0111<br />
0110 1111 0111 0010<br />
0110 1011 0110 1001<br />
0110 1110 0110 0111<br />
以16比特分组求和，结果为0000 1100 0010 0000，取反得到1111 0011 1101 1111</li>
<li>a. 和为0001 1001 0001 1110，取反为1110 0110 1110 0001<br />
b. 和为0110 0100 0101 1111，取反为1001 1011 1010 0000<br />
c. 和为0000 0101 0000 0000，取反为1111 1010 1111 1111</li>
<li>余数为100，R=100=4</li>
<li>略</li>
<li>a. 因为任何单比特差错都会导致校验码除以生成多项式的余数改变。设第 i 位反转，0&lt;=i&lt;=d+r-1，则接收到的数据 K = D*2<sup>r</sup> XOR R + 2<sup>i</sup>，如果用 G 除 K，那么余数一定不为 0<br />
b. 能。这里的G可以被11（二进制）整除，但是，任何奇数个比特错误（不论是否连续）所造成的偏差必然不可被11（二进制）整除。</li>
<li>a. 求导得<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><mi>N</mi><mo stretchy="false">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow><mi>N</mi><mo>−</mo><mn>2</mn></mrow></msup><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">N(1-p)^{N-1}+N(N-1)p(1-p)^{N-2}=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，计算得到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi>p</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">(1-p)-(N-1)p=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">p=\frac{1}{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>。<br />
b. 使用该p值，效率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>N</mi><mi>N</mi></mfrac><mo stretchy="false">(</mo><mfrac><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow><mi>N</mi></mfrac><msup><mo stretchy="false">)</mo><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">\frac{N}{N}(\frac{N-1}{N})^{N-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>，当N趋近于无穷时，其值趋近于1/e。</li>
<li>同样的流程。</li>
<li>a. 在一个时隙，结点A成功占用信道的概率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>P</mi><mi>B</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_A(1-P_B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，总体效率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>P</mi><mi>B</mi></msub><mo stretchy="false">)</mo><mo>+</mo><msub><mi>P</mi><mi>B</mi></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>P</mi><mi>A</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_A(1-P_B)+P_B(1-P_A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br />
b. 如果<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>A</mi></msub><mo>=</mo><mn>2</mn><msub><mi>p</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">p_A=2p_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，则发生碰撞后，在后面的一个时隙A重传成功的概率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>p</mi><mi>B</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p_A(1-p_B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，B重传成功的概率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>B</mi></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>p</mi><mi>A</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p_B(1-p_A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，二者并不是两倍关系。要使得二者为两倍关系，则<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>A</mi></msub><mo>−</mo><msub><mi>p</mi><mi>A</mi></msub><msub><mi>p</mi><mi>B</mi></msub><mo>=</mo><mn>2</mn><msub><mi>p</mi><mi>B</mi></msub><mo>−</mo><mn>2</mn><msub><mi>p</mi><mi>A</mi></msub><msub><mi>p</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">p_A-p_Ap_B=2p_B-2p_Ap_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>A</mi></msub><mo>+</mo><msub><mi>p</mi><mi>A</mi></msub><msub><mi>p</mi><mi>B</mi></msub><mo>=</mo><mn>2</mn><msub><mi>p</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">p_A+p_Ap_B=2p_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>A</mi></msub><mo>=</mo><mfrac><mrow><mn>2</mn><msub><mi>p</mi><mi>B</mi></msub></mrow><mrow><mn>1</mn><mo>+</mo><msub><mi>p</mi><mi>B</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">p_A=\frac{2p_B}{1+p_B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.378324em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.897216em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br />
c. 节点A的平均吞吐量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2p(1-p)^{N-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>，其他节点：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mn>2</mn><mi>p</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow><mi>N</mi><mo>−</mo><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">p(1-2p)(1-p)^{N-2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>a. 一个节点没能在一个时隙传输数据的概率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">1-p(1-p)^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>，故节点A在时隙5首次成功的概率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mn>3</mn></msup><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mn>3</mn></msup><msup><mo stretchy="false">)</mo><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">p(1-p)^3(1-p(1-p)^3)^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span>。<br />
b. 某个节点在时隙4成功的概率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">1-p(1-p)^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>。<br />
c. 在时隙3中出现首个成功的概率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mn>3</mn></msup><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mn>3</mn></msup><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">4p(1-p)^3(1-p(1-p)^3)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">4</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>。<br />
d. 效率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">4(1-p(1-p)^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">4</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
<li>略</li>
<li>一个结点的传输时间为Q/R，一个轮询周期的时间为N(Q/R+t<sub>poll</sub>)，在这段时间内可传输NQ比特数据，故吞吐量为Q/(Q/R+t<sub>poll</sub>)</li>
<li>a. 从A到F依次为：192.168.1.1、192.168.1.3、192.168.2.1、192.168.2.4、192.168.3.1、192.168.3.3<br />
b. 从A：00-00-00-00-00-00、左路由器左接口：11-11-11-11-11-11、B：22-22-22-22-22-22、左路由器右接口：33-33-33-33-33-33、C：44-44-44-44-44-44、右路由器左接口：55-55-55-55-55-55、D：66-66-66-66-66-66、右路由器右接口：77-77-77-77-77-77、E：88-88-88-88-88-88、F：99-99-99-99-99-99。<br />
c. 主机E发送数据报，其以太网帧中目的MAC地址为右路由器的右接口MAC，即77-77-77-77-77-77，IP报头的目的IP地址为192.168.1.3。交换机注意到MAC地址为路由器的MAC，将其转发到路由器，第一步完成。右路由器接收到这个帧之后传递到其网络层，查询完成之后将其从左边接口发送出去，MAC地址修改为左路由器的右接口，即44-44-44-44-44-44。然后左边路由器接收到帧，将MAC修改为B的MAC即33-33-33-33-33-33，转发到B。<br />
d. 首先发送ARP报文广播获取192.168.3.2的MAC地址，然后发送。</li>
<li>a. 不用，因为二者在同一个子网。源IP为E的IP，目的IP为F的IP，源MAC为E的MAC，目的MAC为F的MAC。<br />
b. 不用，二者不在同一个子网。源IP为E的IP，目的IP为B的IP，源MAC为E的MAC，目的MAC为R1右端口的MAC。<br />
c. 广播查询B的MAC，会收到，不会转发，B不会发送一个ARP请求查询A的MAC，因为A发出的帧中已经包含了A的MAC地址。S1会在转发表中记录B的地址并向A转发。</li>
<li>a. 同15.a<br />
b. 会，因为此时E不知道B和它是不是在一个子网中。目的MAC地址为广播MAC。<br />
c. 会向子网3发送报文，其他同15.c</li>
<li>10Mbps等待51200比特时间需要5.12ms，0.512ms。</li>
<li>A将会在512+64=576比特时刻完成帧的传输，在A传输结束之前B开始传输一帧，因此在B开始传输时，A的传输信号还没有到达B，也即B传输开始的时刻在0~324比特时间之内。最坏情况下，B的信号将在324+325=649比特时间到达A，而A此时已经完成了传输，因此A能够完成传输。</li>
<li>两者在245比特时间时同时检测到碰撞，因此会等待K×512比特时间，其中K取0或1。如果两者选取的K相同，那么重传依然会碰撞。如果选择的K不同，不妨设A选择的是0，B选择的是1，二者在检测到碰撞后发送48比特时间的干扰数据，在293比特时间同时停止发送数据，然后在293+245=538比特时间A和B停止检测到信号，然后A开始传输数据，需要96比特时间，即在634比特时间完成传输。同时B等待到293+512=805比特时间。而A的重传数据在538+245=783比特时间时被B检测到，一直到634+245=879比特时间才结束接收信号，B也在这个比特时间开始传输其数据。</li>
<li>a. 一帧需要k个时隙才能传输完成。设Y为连续X个空闲时隙，直到出现一个工作时隙，Y=X+1。则<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><msub><mi>P</mi><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>k</mi><mi>i</mi><mi>n</mi><mi>g</mi></mrow></msub></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><mi>N</mi><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">E(Y)=\frac{1}{P_{working}}=\frac{1}{Np(1-p)^{N-1}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3931879999999999em;vertical-align:-0.5480799999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29011428571428566em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5480799999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3719729999999999em;vertical-align:-0.5268649999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.648135em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7740928571428571em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5268649999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，故<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mi>E</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">E(X)=E(Y)-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>。故效率=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>k</mi><mrow><mi>k</mi><mo>+</mo><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{k+x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.283439em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>可求出。<br />
b. 求导计算得到p=1/N时得到最大值。<br />
c. N趋于无穷时，效率为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>k</mi><mrow><mi>k</mi><mo>+</mo><mi>e</mi><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{k+e-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.283439em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">e</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br />
d. 帧长度变大时，发送一个帧需要的时隙增加，有其他节点等待发送数据的可能性越大，空闲时隙的数量就越少。</li>
<li>略，易得。</li>
<li>略</li>
<li>1100Mbps。转发设备是交换机，因此无碰撞。</li>
<li>使用集线器代替则下面的3个100Mbps光纤只能以100Mbps的总带宽服务下面的主机，故一共500Mbps。</li>
<li>100Mbps。</li>
<li>第一步完成后，交换机学习到B的MAC地址以及接口。然后将这个帧发送到其他所有接口，因为此时交换机还不知道E在哪。第二步完成后，交换机学习到E的MAC地址以及接口。然后将这个帧发送给B。第三步完成后，交换机学习到A的MAC地址以及接口，然后将这个帧发送给B。第四步完成后，交换机没有学习。</li>
<li>略</li>
<li>EE发送的帧到达交换机时，交换机将帧转发到路由器，然后路由器修改目的MAC地址将其发送到交换机，然后交换机将该帧通过CS的VLAN发送出去。</li>
<li>略</li>
<li>略</li>
<li>以太网、DHCP、ARP、DNS、TCP、HTTP。</li>
<li>略</li>
<li>略</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://hornos3.github.com/2023/03/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E7%AC%AC6%E7%AB%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CoLin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CoLin's BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E7%AC%AC6%E7%AB%A0/" class="post-title-link" itemprop="url">计算机网络——第6章</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-02 23:52:16 / 修改时间：23:52:35" itemprop="dateCreated datePublished" datetime="2023-03-02T23:52:16+08:00">2023-03-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">课内笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E5%86%85%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>9.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>9 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>链路层服务的原则：</p>
<ul>
<li>错误检测，校正</li>
<li>共享广播信道：多址访问</li>
<li>链路层寻址</li>
<li>局域网：以太网，VLAN</li>
</ul>
<p>实例化，各种链路层技术的实现</p>
<h2 id="61-链路层概述"><a class="markdownIt-Anchor" href="#61-链路层概述"></a> 6.1 链路层概述</h2>
<ul>
<li>节点：主机和路由器</li>
<li>链路：沿着通信路径连接相邻节点的通信信道，分为有线和无线链路</li>
<li>帧：数据链路层的分组单元</li>
</ul>
<p>数据链路层的主要功能：负责将数据包通过链路从一个结点传输到物理上相邻的节点</p>
<p>数据链路层的简单模型：一个主机向另一个主机发送数据，期间经过多个路由器，通过了多个网络，数据在这些网络中流动。</p>
<p>说明：</p>
<ul>
<li>数据报咋不同链路上可能由不同的链路层协议进行处理
<ul>
<li>如第一段链路由PPP处理，最后一段链路由以太网处理等</li>
</ul>
</li>
<li>不同的链路层协议可能提供不同的服务，如可靠传递等</li>
</ul>
<h3 id="611-链路层提供的服务类型"><a class="markdownIt-Anchor" href="#611-链路层提供的服务类型"></a> 6.1.1 链路层提供的服务类型</h3>
<ul>
<li>成帧、链路访问
<ul>
<li>将数据加上头部和尾部，以此封装为数据帧</li>
<li>共享介质的信道访问</li>
<li>帧头部用MAC地址标识源和目的，不同于IP地址</li>
</ul>
</li>
<li>可靠传递
<ul>
<li>很少用于误码率低的链路（光纤、双绞线链路）</li>
<li>用于误码率高的链路（无线链路）</li>
</ul>
</li>
<li>流量控制
<ul>
<li>在相邻的收发节点之间限制流量</li>
</ul>
</li>
<li>差错检测
<ul>
<li>信号衰减和电磁干扰噪声容易导致出错，接收方检测到错误存在时，会给发送方发送信号要求重传或者丢弃该数据帧</li>
</ul>
</li>
<li>差错纠正
<ul>
<li>接收方检测和纠正帧中错误，不用重传</li>
</ul>
</li>
<li>半双工和全双工
<ul>
<li>半双工时链路两段的节点都能够传输分组但不能同时传输</li>
</ul>
</li>
</ul>
<h3 id="612-链路层在何处实现"><a class="markdownIt-Anchor" href="#612-链路层在何处实现"></a> 6.1.2 链路层在何处实现</h3>
<p>链路层的主体部分是在网络适配器中实现的，网络适配器有时也称为网络接口卡，位于网络适配器的核心是链路层控制器，其中实现了多个链路层服务。</p>
<p>适配器通信</p>
<ul>
<li>在每一台设备上都有一个适配器（主机、交换机、路由器等）</li>
<li>链路层在适配器或芯片上实现</li>
<li>直接与主机的系统总线相连，与其他连接主机的IO设备相同</li>
<li>是硬件、软件和固件的结合体</li>
<li>适配器是半自治单元
<ul>
<li>网络接口卡或芯片是适配器</li>
<li>帧的发送和接收、检错、丢弃都是适配器自主进行的</li>
<li>向上提交数据时，需要节点干预</li>
<li>最终受控于节点</li>
</ul>
</li>
<li>发送方在一个帧内封装数据报，增加差错检测位，可靠交付，流量检测等；接收方查找错误，可靠交付，进行流量控制，取出数据报并交给网络层。</li>
</ul>
<h2 id="62-差错检测和纠正技术"><a class="markdownIt-Anchor" href="#62-差错检测和纠正技术"></a> 6.2 差错检测和纠正技术</h2>
<p>在发送节点，为了保护比特免受差错，使用<font color=red>差错检测和纠正比特EDC</font>来增强数据D。通常要保护的数据不仅从网络层传递下来需要通过链路传输的数据报，而且包括链路层首部中的链路级的寻址信息、序号和其他字段。链路级帧中的D和EDC都被发送到接收节点。<font color=red>差错检测不是100%可靠的，EDC越长可靠程度越高，检错和纠错的能力越强</font>。</p>
<h3 id="621-奇偶校验"><a class="markdownIt-Anchor" href="#621-奇偶校验"></a> 6.2.1 奇偶校验</h3>
<p>最简单的差错检测方式就是单个比特的奇偶校验，但是检错能力太差了，因此可以使用二维奇偶校验方法，包含比特值改变的列和行的校验值都将会出现差错，因此接收方不仅可以检查到单个比特出错，还可以纠正。</p>
<p>接收方检测和纠正差错的能力被称为<font color=red>前向纠错</font>。</p>
<h3 id="622-检验和方法"><a class="markdownIt-Anchor" href="#622-检验和方法"></a> 6.2.2 检验和方法</h3>
<p>因特网检查和</p>
<ul>
<li>目标：检测发送包中的错误，仅用于运输层</li>
<li>发送方：
<ul>
<li>将数据段的内容作为16比特的整数序列</li>
<li>校验和：累加求和，计算和的反码</li>
<li>发送方将得到的校验和值放入到PDU校验和字段</li>
</ul>
</li>
<li>接收方
<ul>
<li>计算收到的数据段的校验和</li>
<li>检查计算出的校验和与校验和字段中的值是否相同
<ul>
<li>如果不同则检测到错误</li>
<li>如果相同则<font color=red>认为</font>没有监测错误（不代表就一定没有错误）</li>
</ul>
</li>
</ul>
</li>
<li>仅用于TCP、UDP和IPv4协议之中</li>
</ul>
<h3 id="623-循环冗余纠错crc"><a class="markdownIt-Anchor" href="#623-循环冗余纠错crc"></a> 6.2.3 循环冗余纠错CRC</h3>
<p>对于d个比特的数据D，选择r+1比特模式（生成多项式）表示为G，目标是选择r个CRC比特R使得：<br />
- &lt;D,R&gt;刚好能够被G整除（模2计算）<br />
- 接收方已知G，用G去除&lt;D,R&gt;，如果余数不为0则检测到错误<br />
- 能检测到所有小于r+1个比特的错误</p>
<h2 id="63-多路访问即多址访问链路与协议"><a class="markdownIt-Anchor" href="#63-多路访问即多址访问链路与协议"></a> 6.3 多路访问（即多址访问）链路与协议</h2>
<p>链路分为两种：</p>
<ul>
<li>点到点链路，由链路一端的单个发送方和链路另一端的单个接收方组成。如PPP、以太网交换机和主机之间点到点的链路</li>
<li>广播链路，能够让多个发送和接收节点连接到相同的、单一的、共享的广播信道上。如传统以太网、802.11无线LAN。
<ul>
<li>特点：
<ul>
<li>单个共享广播信道</li>
<li>当两个或多个节点同时传输时，会产生相互干扰。</li>
<li>碰撞：一个节点同时收到两个或多个信号</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>多址访问协议：</p>
<ul>
<li>分布式算法决定节点如何共享信道，如结点何时可以传输数据</li>
<li>特别注意：有关共享信道的通信需要使用信道本身，没有额外的信道用于协调</li>
<li>理想的多址访问协议需要满足：
<ul>
<li>假定：信道为速率为Rb/s的广播信道</li>
<li>当只有一个节点有数据发送时，该结点的吞吐量为R</li>
<li>当M个节点有数据发送时，每一个结点的吞吐量为R/M</li>
<li>分散，没有特定节点用于调整传输，没有时钟同步</li>
<li>简单，容易实现</li>
</ul>
</li>
<li>多路访问协议的分类：
<ul>
<li>信道划分协议
<ul>
<li>将信道划分为多个小片（使用时隙、频率、编码等划分）</li>
<li>将不同的片分配给不同的节点使用</li>
</ul>
</li>
<li>随机访问协议
<ul>
<li>信道没有被分割，允许碰撞</li>
<li>需要有碰撞恢复的技术</li>
</ul>
</li>
<li>轮流协议
<ul>
<li>节点轮流传送，但是数据量大的节点轮流更长时间</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="631-信道划分协议"><a class="markdownIt-Anchor" href="#631-信道划分协议"></a> 6.3.1 信道划分协议</h3>
<p>信道划分分为时分复用、统计时分复用、频分复用和随机访问这几种。</p>
<p>信道划分协议TDMA</p>
<ul>
<li>时分复用TDM
<ul>
<li>循环访问信道，每一个结点在每一次循环中得到固定长度的时隙（时隙长度=传输单个分组的时间）</li>
<li>没有数据发送的时隙空闲</li>
</ul>
</li>
<li>统计时分复用STDM
<ul>
<li>使用STDM帧作为基本单位，一个STDM帧可以容纳多个分组，时隙数量小于用户数量。</li>
<li>每当用户需要发送分组时将其发送到集中器中的集中缓存</li>
<li>集中器按照一定的顺序依次扫描用户是否输入，将缓存中的输入数据放到STDM帧中，没有数据的缓存跳过，当一个帧的数据放满时发送。</li>
<li>是时分复用的改进</li>
</ul>
</li>
<li>信道划分协议FDMA
<ul>
<li>信道按照频谱分为若干个频段</li>
<li>每一个节点分配固定的频段</li>
<li>在频段不用时该部分信道就被闲置浪费了</li>
</ul>
</li>
</ul>
<h3 id="632-随机访问协议"><a class="markdownIt-Anchor" href="#632-随机访问协议"></a> 6.3.2 随机访问协议</h3>
<ul>
<li>当节点有数据发送时
<ul>
<li>以信道全部速率R传输</li>
<li>没有主节点起到协调作用</li>
</ul>
</li>
<li>两个或多个节点传送时会发送碰撞</li>
<li>需要有检测碰撞和恢复碰撞的技术，如延时之后重传</li>
<li>ALOHA，时隙ALOHA等</li>
</ul>
<h4 id="aloha"><a class="markdownIt-Anchor" href="#aloha"></a> ALOHA</h4>
<p>Additive Link On-Line HAwaii system，是计算机网络早期发展中一个著名的网络，至今还在运行。</p>
<p>特征：</p>
<ul>
<li>网络拓扑采用星形结构</li>
<li>为了节省费用和易于组网，网络中各个站点的通信采用无线传输介质</li>
<li>由于采用无线电信道。考虑到无法申请更多的频率点，因此所有站点都使用同一的频率通过主机交换信息</li>
</ul>
<p>工作原理：</p>
<ul>
<li>当一帧首次到达（即一个网络层数据报在发送节点从网络层传递下来），节点立刻将该帧完整地传输到广播信道中，取帧传输时间为时间单元。</li>
<li>在任何给定时间，某个结点传输一个帧的概率为p。在其传输过程中其他节点不能传输，根据计算，一次传输成功的概率为p(1-p)<sup>2(N-1)</sup>。ALOHA协议的最大效率为1/2e。</li>
<li>如果发生了碰撞，节点等待随机的一段时间之后重新发送分组。</li>
<li><font color=red>ALOHA系统中一个节点并不会关心其他结点是否正在发送帧，这也就是为什么纯ALOHA一次传输成功的概率为p(1-p)<sup>2(N-1)</sup>，对于一个在t时刻开始传输的帧（所有帧传输时间为1）而言，需要从t-1到t+1的这段时间内都没有其他的帧开始传输，可见如果传播速率足够快，在该帧还没有发送完的时候，已经有节点能够接收该帧了，但它不会因此而阻止自己不发送自己需要发送的帧。</font></li>
</ul>
<h4 id="时隙aloha"><a class="markdownIt-Anchor" href="#时隙aloha"></a> 时隙ALOHA</h4>
<p>将整个链路以时隙分割，每一个主机如果要发送分组，则必须在每一个时隙之内将分组发送完成。如果有冲突则随机等待几个时隙之后重发。</p>
<h4 id="载波侦听多路访问csma"><a class="markdownIt-Anchor" href="#载波侦听多路访问csma"></a> 载波侦听多路访问CSMA</h4>
<p>在时隙和纯ALOHA中，一个节点传输的决定独立于连接到这个广播信道上的其他节点的活动。特别是一个结点不关心在它开始传输时是否有其他节点正在传输。</p>
<p>载波侦听：在传输前首先对链路进行监听，如果信道空闲，则传输整个帧，否则等待。<font color=red>但是碰撞还是可能发生。如果一个信道的延迟时间比较长，当其他主机开始发送分组时，这个分组可能不会很快地传到当前主机，使得当前主机误以为信道中没有分组正在传输，因此可能存在其传输还未完成时发现有碰撞的情况。</font></p>
<p>CSMA分类：</p>
<ul>
<li>非坚持CSMA，一旦监听到信道忙，就不再继续监听，而是根据协议的算法延迟一个随机的时间之后重新监听。如果进行载波监听时发现信道空闲，则将准备好的帧发送出去。</li>
<li>时隙非坚持CSMA，采用划分时隙的随机接入CSMA协议，协议规定只能在每一个时隙开始时才能发送帧。</li>
<li>1坚持CSMA，一个站点要传送数据之前首先监听信道，如果忙则持续等待到监听到信道空闲时发送数据，如果发生冲突则站点等待一个随机长的时间然后重新开始。</li>
<li>P坚持CSMA，一个站点要传送数据之前首先监听信道，如果忙则持续等待到监听到信道空闲时，以概率P发送数据，而以（1-P）延迟一段时间τ（网络中最远的端到端传播时延），重新监听信道。如果发生冲突，站点等待一个随机长的时间，然后重新开始。</li>
</ul>
<p>CSMA比较：</p>
<ul>
<li>非坚持：不能充分利用信道刚刚转入空闲期的这段时间</li>
<li>1坚持：容易在上述这段时间之内产生冲突，实际网络常用</li>
<li>P坚持：很难选择一个用于各种通信量度的P值</li>
</ul>
<h4 id="具有碰撞检测的载波监听多路访问csmacd"><a class="markdownIt-Anchor" href="#具有碰撞检测的载波监听多路访问csmacd"></a> 具有碰撞检测的载波监听多路访问（CSMA/CD）</h4>
<ul>
<li>在短时间内碰撞能够被检测
<ul>
<li>在有线LANs中比较容易：测量信号强度，比较收发的信号</li>
<li>在无线LANs中比较困难：传输时接收器关闭，接收的信号远小于发送的信号强度</li>
</ul>
</li>
<li>碰撞之后停止传输，减少信道浪费</li>
<li>强化碰撞
<ul>
<li>当发送数据的站一旦发现产生碰撞，除了立即停止发送数据之外，还要继续发送若干比特的人为干扰信号，以便让所有的用户都知道现在已经发生了碰撞</li>
</ul>
</li>
</ul>
<p>争用期：</p>
<ul>
<li>最先发送数据帧的站，在发送数据帧之后至多经过2τ（最长的端到端时延）时间就可以知道发送的数据帧是否遭受碰撞</li>
<li>以太网的端到端往返时延2τ称为争用期，或碰撞窗口</li>
<li>经过争用期这段时间还没有检测到碰撞，就可以确认这次发送没有碰撞</li>
</ul>
<p>以太网CSMA/CD算法：</p>
<ul>
<li>网卡从网络层接收数据报，并创建数据帧</li>
<li>如果网卡检测信道空闲，则开始进行帧传输</li>
<li>如果网卡检测信道忙，则等待直到信道关闭，然后发送</li>
<li>如果网卡发送整个帧没有探测到另一个传输，则网卡完成帧发送</li>
<li>如果网卡检测到另一个传输，则传输终止并发送干扰信号</li>
<li>传输终止之后，使用二进制退避（网卡随机从0/1/2/3/…/2<sup>m</sup>-1之中选择K，网卡等待K*512bit时间，返回第2步）越多的碰撞决定越大的退避间隔</li>
</ul>
<h3 id="633-轮流协议"><a class="markdownIt-Anchor" href="#633-轮流协议"></a> 6.3.3 轮流协议</h3>
<p>为了满足：当有M个节点活跃时，每一个活跃节点的吞吐量接近R/M bps，开发了此协议。</p>
<ul>
<li>信道划分协议的特点：
<ul>
<li>在负荷重时，共享信道有效公平</li>
<li>在负荷轻时效率低，信道访问延时，即使只有一个活动结点也只能分配到1/N的带宽</li>
</ul>
</li>
<li>随机访问协议的特点：
<ul>
<li>在负荷轻时效率高，只有一个节点也能够充分利用信道</li>
<li>在负荷重时将会产生巨大的碰撞开销</li>
</ul>
</li>
</ul>
<h4 id="轮询协议"><a class="markdownIt-Anchor" href="#轮询协议"></a> 轮询协议</h4>
<ul>
<li>要求这些节点之一要被指定为主节点。</li>
<li>主节点以循环的方式轮询每一个节点。主节点首先向节点1发送一个报文说明其能够传输的帧的最多数量，然后在节点1传输了某些帧之后，主节点再发送报文向节点2说明，以此类推。</li>
<li>这个协议引入了轮询时延的开销，且如果主节点故障，整个网络都将崩溃。</li>
</ul>
<h4 id="令牌传递协议"><a class="markdownIt-Anchor" href="#令牌传递协议"></a> 令牌传递协议</h4>
<ul>
<li>没有主节点，一个称为令牌的小的特殊帧在节点之间以某种固定的次序进行交换。</li>
<li>当一个节点收到令牌时，仅当它有一些帧要发送时，它才持有这个令牌，否则立即向下一个节点转发该令牌。当一个节点收到令牌时，如果它确实有帧要传输，它发送最大数目的帧数，然后把令牌转发给下一个节点。</li>
<li>令牌传递分散，并高效，但一个节点的故障可能会使整个信道崩溃。如果一个节点偶然忘记了释放令牌，则必须调用某些恢复步骤使得令牌返回到循环。</li>
</ul>
<h4 id="总结对共享介质的处理"><a class="markdownIt-Anchor" href="#总结对共享介质的处理"></a> 总结：对共享介质的处理</h4>
<ul>
<li>信道划分，可基于时间、频率、编码，分为时分和频分</li>
<li>随机划分（动态）
<ul>
<li>ALOHA，S-ALOHA，CSMA，CSMA/CD</li>
<li>载波侦听：有线较容易，无线较困难</li>
<li>CSMA/CD 用于以太网</li>
<li>CSMA/CA 用于802.11</li>
</ul>
</li>
<li>轮流
<ul>
<li>主节点轮询，令牌传递</li>
</ul>
</li>
</ul>
<h2 id="64-交换局域网"><a class="markdownIt-Anchor" href="#64-交换局域网"></a> 6.4 交换局域网</h2>
<h3 id="641-链路层寻址与arp"><a class="markdownIt-Anchor" href="#641-链路层寻址与arp"></a> 6.4.1 链路层寻址与ARP</h3>
<h4 id="mac地址lan地址物理地址"><a class="markdownIt-Anchor" href="#mac地址lan地址物理地址"></a> MAC地址（LAN地址，物理地址）</h4>
<p>作用：在数据链路层表示每一块网络适配器，使得能够在广播信道上寻找目标节点<br />
组成：</p>
<ul>
<li>48 bit</li>
<li>前24bit由IEEE分配管理——OUI号</li>
<li>后24bit由厂商自行分配</li>
<li>IEEE管理MAC地址空间</li>
</ul>
<p><font color=red>MAC地址是烧在网络适配器的ROM中，不可修改（软件模拟的可以修改）</font></p>
<p>与IP地址比较：</p>
<ul>
<li>MAC地址是平面地址，类似于身份证号</li>
<li>IP地址是层次地址，类似于邮政通信地址</li>
<li>MAC地址在不同的网络之间迁移时，不会改变</li>
<li>IP地址在不同的网络之间迁移时，需要改变以适应新的网络配置</li>
<li>无线网络中进行漫游时，如果在不同的网络之间切换时，改变网络设置会导致连接中断。</li>
</ul>
<p>MAC地址的重要性：</p>
<ul>
<li>局域网设备不能识别IP地址，因为其工作在链路层，因此只能够通过MAC地址寻找主机。</li>
<li>进程产生的套接字是端口号+IP地址，在局域网中是通过IP地址获得MAC地址。</li>
<li>通过ARP（地址解析协议）可以在已知IP地址的情况下，获得MAC地址。</li>
</ul>
<h4 id="地址解析协议arp"><a class="markdownIt-Anchor" href="#地址解析协议arp"></a> 地址解析协议（ARP）</h4>
<p>目标：根据目标的IP地址获取其MAC地址<br />
ARP高速缓存（ARP表）</p>
<ul>
<li>每一个IP节点（主机、路由器）都有ARP表</li>
<li>局域网节点的IP/MAC地址映射：&lt;IP; MAC; TTL&gt;</li>
<li>TTL：时限，Time to Live，超过TTL的地址映射会被删除（一般20分钟）</li>
</ul>
<p>ARP协议工作流程：</p>
<ul>
<li>建立ARP请求包</li>
<li>广播发送该ARP请求包，其中包含目标的IP地址。广播的MAC地址为全1，即FF:FF:FF:FF:FF:FF</li>
<li>目的主机接收到该ARP请求包，建立包含自己的MAC地址的ARP应答包（请求包和应答包的源、目标是不一致的）并发送</li>
<li>发出请求的主机接收到该数据包之后，更新ARP高速缓存</li>
</ul>
<p>当一台主机需要发送数据到另一个子网的主机时，首先需要通过ARP报文获取目标主机的MAC地址，然后在发送IP报文时，<font color=red>MAC地址不应该填目标主机的MAC，而应该是路由器的MAC，这样路由器才能将这个报文转发到另外一个子网。</font></p>
<h3 id="642-以太网"><a class="markdownIt-Anchor" href="#642-以太网"></a> 6.4.2 以太网</h3>
<p>类型：</p>
<ul>
<li>总线式以太网：所有的主机都与一条总线连接，接收到不是发送到本机的报文则不予理会。</li>
<li>交换式以太网：主机与主机通过交换机连接为网状结构。</li>
</ul>
<h4 id="以太网帧结构"><a class="markdownIt-Anchor" href="#以太网帧结构"></a> 以太网帧结构</h4>
<ul>
<li>数据字段：46~1500字节</li>
<li>前同步码：8字节，前面7个字节的格式为10101010，最后一个字节为10101011，用于同步发送方与接收方的时钟</li>
<li>地址：6字节，若适配器收到以太网帧，目的地址为自己的MAC地址或广播地址，就将帧中的数据传给网络层，否则适配器丢弃该帧</li>
<li>类型：上层协议类型（大多为IP协议，也支持其他协议）</li>
<li>CRC：由接收方检查，如果检测到错误就将该帧丢弃</li>
</ul>
<p>以太网提供的服务：</p>
<ul>
<li>无连接服务：在发送适配器和接收适配器之间不需要另外的连接操作</li>
<li>不可靠服务：接收适配器不发送确认帧或否认帧给发送方</li>
<li>交给网络层的数据包可能存在间隙，如果应用使用TCP，间隙会被填充，否则应用会看见间隙</li>
</ul>
<p>以太网使用的CSMA/CD</p>
<ul>
<li>没有时隙</li>
<li>当适配器侦听到其他的适配器在传输时，它不传输帧，即载波侦听</li>
<li>正在传输的适配器如果检测到其他适配器也在传输，则其终止自己的传输，即碰撞检测</li>
<li>在重新传输之前，适配器等待一段随机时间，即随机访问</li>
</ul>
<p>算法流程：</p>
<ul>
<li>适配器收到来自网络层的数据包，创建帧</li>
<li>若适配器检测到信道空闲，则开始传输帧；若检测到信道忙，就开始等待，直到信道空闲时才开始传输该帧</li>
<li>若适配器传输了整个帧而没有检测到其他适配器的传输，则该适配器完成该帧的传输</li>
<li>若适配器在传输时检测到其他适配器也在传输，则停止传输并发出拥塞信号</li>
<li>终止传输之后适配器进入指数回退阶段，在经历第m次碰撞之后，适配器随机从{0, 1, 2, …, 2<sup>m-1</sup>}中选择k值。适配器等待k*512比特时间之后返回第2步</li>
</ul>
<p>拥塞信号：用于确保所有传输者都能检测到碰撞而传输的信号，共48比特<br />
比特时间：传输1个比特所用的时间</p>
<p>指数回退算法</p>
<ul>
<li>目的：适配器重传时试图估计正确的负载。</li>
<li>重载：随机等待的时间可能会更长。</li>
<li>第一次碰撞：从{0, 1}中选择K；延迟是K*512比特传输时间</li>
<li>第二次碰撞：从{0, 1, 2}中选择K</li>
<li>…</li>
</ul>
<p>重要特性：</p>
<ul>
<li>使用CSMA/CD协议的以太网不能进行全双工通信，而只能使用双向交替通信（半双工通信）</li>
<li>每一个站在发送数据之后的一小段时间之内存在遭遇碰撞的可能性</li>
<li>这种发送的不确定性使得整个以太网的平均通信量远小于以太网的最高数据率</li>
</ul>
<p>争用期长度：</p>
<ul>
<li>10Mb/s的以太网取51.2μs为争用期的长度，100Mb/s为其1/10</li>
<li>对于10Mb/s的以太网，在争用期之内可以发送512比特（64字节）</li>
<li>以太网在发送数据时，如果前64字节没有发生碰撞，则后续的数据旧不会发生碰撞</li>
</ul>
<p>最短有效帧长</p>
<ul>
<li>如果发生碰撞，就一定会发生在发送的前64字节内</li>
<li>由于一检测到碰撞就立刻中止发送，则此时已经发送出去的数据量一定小于64字节</li>
<li>以太网规定<font color=red>最短的有效帧长为64字节</font>，凡是长度小于64字节的帧都是由于冲突而异常中止的无效帧</li>
</ul>
<h4 id="物理层简介"><a class="markdownIt-Anchor" href="#物理层简介"></a> 物理层简介</h4>
<p>信号编码：</p>
<ul>
<li>曼彻斯特编码：设置0为上升沿，1为下降沿</li>
<li>差分曼彻斯特编码：0翻转，1不翻转</li>
</ul>
<p>集线器互联</p>
<ul>
<li>主干集线器互联LAN网段</li>
<li>扩展了节点之间的最大距离</li>
<li>原先独立的网段碰撞域变成了一个大的碰撞域</li>
<li>不能将10BaseT和100BaseT的以太网互联
<ul>
<li>10和100代表速率，T代表使用双绞线</li>
<li>节点连接到集线器，是一个星形的拓扑形状。在节点和集线器之间的最大距离为100m</li>
<li>10Base5代表粗同轴电缆，可靠性好，抗干扰能力强。
<ul>
<li>收发器：用于发送、接收数据，冲突检测，电气隔离等。</li>
<li>AUI：连接件单元接口</li>
<li>这种电缆一般使用总线型拓扑，用于网络骨干连接</li>
</ul>
</li>
<li>10Base2代表细同轴电缆，可靠性稍差
<ul>
<li>使用BNC T型接头连接，使用总线型拓扑，可用于办公室LAN</li>
</ul>
</li>
</ul>
</li>
<li>集线器
<ul>
<li>集线器本质上是物理层的中继器</li>
<li>从一个接口收到的比特流会传给其他所有接口</li>
<li>同样速率</li>
<li>没有帧缓存</li>
<li>集线器没有CSMA/CD，由适配器检测碰撞</li>
<li>提供网络管理功能（可网管、智能、网络分段）</li>
</ul>
</li>
<li>千兆以太网
<ul>
<li>使用标准以太网帧格式</li>
<li>允许点对点链路和共享的广播信道</li>
<li>共享信道时使用CSMA/CD，为了得到可接受的效率，节点之间的距离需要短一些</li>
<li>对于点到点链路可以以1Gbps的速率全双工工作</li>
</ul>
</li>
</ul>
<h3 id="643-链路层交换机"><a class="markdownIt-Anchor" href="#643-链路层交换机"></a> 6.4.3 链路层交换机</h3>
<ul>
<li>链路层设备
<ul>
<li>存储、转发以太网帧</li>
<li>查看输入帧的MAC地址，选择性地将帧输出到一个或多个输出链路，使用CSMA/CD</li>
<li>对外透明，主机不知道交换机的存在</li>
<li>即插即用，自学习，交换机无需配置</li>
</ul>
</li>
<li>交换机：多路同时传输
<ul>
<li>主机直接连接到交换机</li>
<li>交换机缓存到数据包</li>
<li>每一条链路都采用了以太网协议，但之间没有冲突，全双工通信
<ul>
<li>每一条链路是其自身的冲突碰撞域</li>
<li><font color=red>这里的全双工通信指的是当两个主机之间存在至少一台交换机时，可以进行全双工通信，其中的每一条物理链路都是半双工的，但由于交换机可以进行存储转发工作，所以两边的两个分组在某一个交换机会相遇，然后各自继续在链路中传输。</font></li>
</ul>
</li>
<li>交换机中存在一个交换表
<ul>
<li>表结构：主机MAC地址，连接主机的接口，时间戳（产生表项的时间）</li>
<li>与路由表类似</li>
</ul>
</li>
<li>交换机通过学习可知通过哪一个接口可以到达哪一个主机
<ul>
<li>当数据帧进入交换机时，交换机学习发送方连接的接口，并将发送方/接口对记录到交换表</li>
</ul>
</li>
<li>交换机：帧过滤/转发
<ul>
<li>使用发送方输入接口与MAC地址</li>
<li>使用目标MAC地址检索交换表</li>
<li>如果检索到目标地址对应的接口，当目标地址接口不是来源接口时，从该接口转发数据帧，否则丢弃该数据帧。如果没有检索到接口则向所有非来源接口转发数据帧广播</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>网桥互联</p>
<ul>
<li>网桥实质上就是一种存储-转发设备，用于实现MAC层的LAN互连</li>
<li>工作原理：
<ul>
<li>不断监听各端口是否有信号</li>
<li>收到无差错的帧则缓存，反之将差错帧丢弃</li>
<li>若所收帧的目的MAC地址属于另一网段，则通过站表决定向何端口转发</li>
<li>网桥不转发同一“网段”内通信的帧
<ul>
<li>目的主机和源主机不连接在网桥的同一个接口上才会转发</li>
</ul>
</li>
<li>网桥不会修改所转发的帧的源地址</li>
</ul>
</li>
<li>网桥的优势
<ul>
<li>过滤通信量</li>
<li>扩大了局域网的物理范围</li>
<li>提高可靠性</li>
<li>可互联不同物理层、不同MAC子层和不同速率的局域网</li>
</ul>
</li>
<li>网桥的缺点
<ul>
<li>接收和转发产生时延</li>
<li>MAC子层没有流量控制功能，网络负荷重时，网桥缓存空间可能发生溢出，产生帧丢失现象</li>
<li>不同MAC子层的网段桥接时，在转发帧之前要修改帧的某些字段，这也需要时间</li>
<li>广播风暴。网桥只适合用户少于几百个和通信量不太大的局域网，当广播信息过多时会产生拥塞</li>
</ul>
</li>
<li>网桥和集线器的区别
<ul>
<li>集线器只是将网络覆盖距离简单地延长，且距离有限，实现在物理层。网桥不仅具有将LAN的覆盖距离延长的作用，而且理论上可以做到无限延长，具体实现在MAC层</li>
<li>集线器仅具有简单的信号整形和放大功能，网桥属于一种智能互联设备，主要提供信号的存储、转发、数据过滤、路由选择等能力</li>
<li>集线器仅是一种硬件设备，网桥还有软件</li>
<li>集线器只能互联同类的LAN，而网桥可以互联不同类型的LAN</li>
</ul>
</li>
<li>透明网桥：网桥对于局域网其他的站点时不可见的</li>
<li>网桥的问题：当一个局域网中有不止一个网桥时，一个帧可能从一个网桥传到另一个网桥，然后另一个网桥又传回来，导致兜圈子现象
<ul>
<li>解决方法：支撑树算法
<ul>
<li>互联在一起的网桥彼此通信后，能够找出原来的网络拓扑的一个子集，在这个子集里面整个连通的网络中不存在回路。一旦支撑树确定，网桥会断开某些端口，以确保原来的拓扑是一个支撑树。</li>
<li>支撑树算法选择一个网桥为树的根，然后以最短路径为依据，找到树上的每一个结点</li>
<li>为了让支撑树能够反映网络拓扑的变化，每隔几秒钟每个网桥要广播其标识号，和它知道的所有其他网桥</li>
<li>缺点：互联的局域网数量很大时，支撑树算法开销会显著增加</li>
</ul>
</li>
</ul>
</li>
<li>多端口网桥
<ul>
<li>链路层可以实现直通交换：帧从入端口转发到出端口不需要收集整个帧，实际上只需要找到帧开头的目的地址即可，这样能够少量减少延迟。</li>
</ul>
</li>
<li>以太网交换机与路由器的比较
<ul>
<li>两者都是存储转发设备，但路由器是网络层设备，交换机是链路层设备</li>
<li>路由器维护的是路由表，实现路由算法，而交换机维护交换表，实现MAC地址过滤和自学习</li>
</ul>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/0974156f60dc4b888f0145997aa9e220.png" alt="" /></p>
<h3 id="644-虚拟局域网vlan"><a class="markdownIt-Anchor" href="#644-虚拟局域网vlan"></a> 6.4.4 虚拟局域网VLAN</h3>
<p>在一个局域网内，所有的第二层广播流量都将穿过整个局域网，这对于安全性不利，并且传播的数据报数量较大，也会影响效率。</p>
<p>虚拟局域网VLAN：是基于接口的VLAN，交换机对接口进行分组使得单一的交换机设备可以为多个虚拟的局域网工作，像是多台交换机实现的功能。</p>
<p>功能：</p>
<ul>
<li>流量隔离，一个VLAN内的帧不能传递到其他的VLAN中</li>
<li>动态分组，交换机的接口可以动态组合，因此VLAN也是可以动态分配的</li>
<li>数据转发，通过VLAN间路由转发</li>
</ul>
<p>trunk接口：多个物理交换机上多个VLAN中的帧发送。VLAN中跨交换机进行转发的帧不能够简单地使用802.1帧格式，而是必须携带VLAN ID信息。802.1q协议（VLAN标记协议）可在trunk接口处增加/删除附加的帧的首部字段</p>
<h2 id="67-回顾web页面请求的历程"><a class="markdownIt-Anchor" href="#67-回顾web页面请求的历程"></a> 6.7 回顾Web页面请求的历程</h2>
<ul>
<li>沿着协议向下依次为应用层、传输层、网络层、链路层</li>
<li>目标：通过请求www页面场景，识别、回顾、理解协议</li>
<li>场景：学生在校园网中用笔记本电脑访问www.google.com并接收信息</li>
</ul>
<h3 id="step-1-计算机连接到internet"><a class="markdownIt-Anchor" href="#step-1-计算机连接到internet"></a> Step 1: 计算机连接到Internet</h3>
<p>正在连接的笔记本需要获得校园网局域网的IP地址、网关、DNS服务器等信息。</p>
<ul>
<li>DHCP请求依次进行UDP封装、IP封装、802.3以太网帧封装</li>
<li>以太网向局域网发送广播，由运行DHCP server的网关路由器收到</li>
<li>以太帧解封装，IP解封装，UDP解封装，得到DHCP请求</li>
<li>DHCP server生成DHCP ACK报文，包含客户端IP、掩码、网关、DNS服务器</li>
<li>DHCP server进行封装，将数据帧通过局域网转发（交换机自学习），在客户端进行解封装</li>
<li>DHCP client收到DHCP ACK应答，现在学生笔记本拥有了自己的IP地址以及DNS服务器、网关</li>
</ul>
<h3 id="step-2-arp协议获取网关路由器mac"><a class="markdownIt-Anchor" href="#step-2-arp协议获取网关路由器mac"></a> Step 2: ARP协议获取网关路由器MAC</h3>
<ul>
<li>广播发送ARP请求，路由器收到之后发送ARP应答，给出路由器接口的MAC地址</li>
<li>客户端知道了网关路由器的MAC地址之后就可以发送包含DNS请求的数据帧了</li>
</ul>
<h3 id="step-3-dns查询"><a class="markdownIt-Anchor" href="#step-3-dns查询"></a> Step 3: DNS查询</h3>
<ul>
<li>将包含DNS查询的IP数据报通过局域网交换机转发到网关路由器</li>
<li>校园网的IP数据包路由转发到comcast网络（路由表由RIP、OSPF、IS-IS和/或BGP协议产生的DNS服务器）</li>
<li>多路分解到DNS server</li>
<li>DNS server向客户端发送包含www.google.com的IP的DNS应答</li>
</ul>
<h3 id="step-4-tcp连接"><a class="markdownIt-Anchor" href="#step-4-tcp连接"></a> Step 4: TCP连接</h3>
<ul>
<li>客户端首先创建到web服务器的TCP套接字</li>
<li>TCP SYN报文的域间路由到web server</li>
<li>web server回应TCP SYNACK</li>
<li>建立TCP连接</li>
</ul>
<h3 id="step-5-http请求与响应"><a class="markdownIt-Anchor" href="#step-5-http请求与响应"></a> Step 5: HTTP请求与响应</h3>
<ul>
<li>将HTTP请求发送到TCP socket</li>
<li>包含HTTP请求的IP数据报路由转发到 <a target="_blank" rel="noopener" href="http://www.google.com">www.google.com</a></li>
<li>web server进行HTTP reply响应，包含web page</li>
<li>包含HTTP响应的IP数据报被路由转发回客户端</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CoLin</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">157</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Hornos3" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Hornos3" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/qq_54218833?spm=1000.2115.3001.5343" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_54218833?spm&#x3D;1000.2115.3001.5343" rel="noopener" target="_blank"><i class="fa fa-crosshairs fa-fw"></i>CSDN</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CoLin</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.5m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">22:02</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
